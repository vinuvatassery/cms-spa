
<div class="app-l-inner-rapper pt-0" kendoRippleContainer>
 
  <!-- Main Title Section -->
  <section class="app-l-mainTittle" >
    <h2>
      
      <span
        class="material-icons sidebar-menu_icon"
        aria-label="task"
        aria-hidden="true"
      >
      assignment_turned_in
      </span>
      Direct Messages
    </h2>
  </section>
</div>
<div class="app-c-drag-row-table">
    <kendo-grid [data]="directMessageGridLists$ | async" [columnMenu]="true" [sortable]="true" 
    (dataStateChange)="dataStateChange($event)"
    [sort]="state.sort"
    [skip]="state.skip"
    [pageSize]="state.take"
    [pageable]="true">
      <kendo-grid-column field="clientFullName" title="From" [width]="200">
        <ng-template kendoGridCellTemplate let-dataItem>
          <button [attr.aria-label]="dataItem.clientFullName" kendoButton look="flat" class="card-link-button" aria-label="Message From" 
          (click)="onClientFromClicked(dataItem.clientId)">
            {{ dataItem.clientFullName }}
          </button>
        </ng-template>
      </kendo-grid-column>
 
    
      <kendo-grid-column field="unreadMessageCount" title="All Messages" [width]="200"></kendo-grid-column>
      <kendo-grid-column field="lastMessageTime" title="Last Message Received" [width]="180">
        <ng-template kendoGridCellTemplate let-dataItem>
          {{ dataItem.lastMessageTime | lastMessageDateTime}}
        </ng-template>
      </kendo-grid-column>
     
      <!-- grid Loader Template -->
      <ng-template kendoGridLoadingTemplate>
        <common-grid-loader-component></common-grid-loader-component>
      </ng-template>
      <!-- grid No data Template -->
      <ng-template kendoGridNoRecordsTemplate>
        <common-grid-no-records></common-grid-no-records>
      </ng-template>

    <!--Footer Paging-->
    <ng-template kendoPagerTemplate let-totalPages="totalPages" let-pagerFirstPage="pagerFirstPage"
    let-currentPage="currentPage">
    <div class="grid-custom-paginationtemplates d-flex">
      <div class="d-flex align-items-center">
        <label class="mr-1" for="DirectMessageListRowsPerPage">Rows Per Page</label>
        <kendo-dropdownlist  [data]="pageSizes" [textField]="'text'" [fillMode]="formUiStyle.dropDownFillMode"
          [valueField]="'value'" [valuePrimitive]="true" aria-label="Rows Per Page" id="DirectMessageListRowsPerPage"
          [(value)]="state.take" (selectionChange)="pageselectionchange($event)"></kendo-dropdownlist>
        <kendo-pager-info> </kendo-pager-info>
        <kendo-grid-messages  [pagerItems]="'rows'" [pagerPage]="'Page'"> </kendo-grid-messages>

      </div>
      <div class="d-flex">
        <kendo-pager-input></kendo-pager-input>
        <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
        <kendo-pager-next-buttons></kendo-pager-next-buttons>
      </div>
    </div>
  </ng-template>
    </kendo-grid>

  </div>
  
  <!-- User Card -->
  <kendo-popover #userCard width="330">
    <ng-template kendoPopoverBodyTemplate>
      <common-user-profile-card></common-user-profile-card>
    </ng-template>
  </kendo-popover>
  
  
 
  
  
   
<form [formGroup]="eventForm">
<section class="k-dialog-body">
  <p class="text-muted">
    Choose the type of event, enter a description, and upload a file if needed.
    Events cannot be edited or deleted once added.
  </p>
  <div class="flex-row">
    <div class="flex-col">
      <kendo-floatinglabel text="Choose Event Type">
        <kendo-dropdownlist formControlName="eventId" [fillMode]="formUiStyle.dropDownFillMode" [data]="eventList"
        textField="eventDesc" valueField="eventId" [valuePrimitive]="true"> </kendo-dropdownlist>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="!eventForm.controls['eventId'].valid"> Event Type is required </kendo-formerror>
    </div>
    <div class="flex-col">
      <kendo-floatinglabel text="Event Description" class="pb-0">
        <kendo-textarea
        formControlName="eventDesc"
        [fillMode]="formUiStyle.inputFillMode"
        [maxlength]="eventDescriptionMaxLength"
        [value]="eventDescription"
        (valueChange)="onEventDescriptionValueChange($event)"
          aria-label="event description"
          [rows]="2"
          [cols]="40"
        >
          <kendo-textarea-suffix class="justify-content-end">
            <span class="tareajustificationcounter">{{
              eventDescriptionCounter
              }}</span>
          </kendo-textarea-suffix>
        </kendo-textarea>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="!eventForm.controls['eventDesc'].valid"> Event Description is required </kendo-formerror>
    </div>
    <div class="flex-col">
      <kendo-floatinglabel text="Attachment Type (attachment upload optional)">
        <kendo-combobox formControlName="attachmentType" [fillMode]="formUiStyle.dropDownFillMode" [data]="eventAttachmentTypeLov$ | async"
        textField="lovDesc" valueField="lovCode" [valuePrimitive]="true">
        </kendo-combobox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-12 mt-2 c-pt-12" *ngIf="eventForm.controls['attachmentType'].value"  >
      <common-document-upload
      [typeCode]="'EVENT_ATTACHMENT'"
      [isFileViewable]="true"
      (handleFileSelectEvent)="handleFileSelected($event)"
      (handleFileRemoveEvent)="handleFileRemoved($event)"
      [isDownloadShow]="true">
      </common-document-upload>
      <kendo-formerror *ngIf="atatchmentValidator"> File Attachment is required </kendo-formerror>
      <kendo-formerror *ngIf="attachmentValidatorSize">File size is limited to 25 MB. Please select a smaller file. </kendo-formerror>
    </div>
    <div class="flex-col flex-col-12">
      <kendo-floatinglabel text="Attachment Note">
        <kendo-textarea
        formControlName="attachmentNote"
        [fillMode]="formUiStyle.inputFillMode"
        #tareaJustifications resizable="auto"
        [maxlength]="attachmentNoteMaxLength"
        [value]="attachmentNote"
        (valueChange)="onAttachmentNoteValueChange($event)"
          aria-label="attachment note"
          [rows]="1"
          [cols]="40"
          class="ta-height-50"
        >
          <kendo-textarea-suffix class="justify-content-end">
            <span class="tareajustificationcounter">{{
              attachmentNoteCounter
              }}</span>
          </kendo-textarea-suffix>
        </kendo-textarea>
      </kendo-floatinglabel>
    </div>
  </div>
</section>

<kendo-dialog-actions>
  <div class="justify-content-between">
    <div class="justify-content-end">
      <button
        kendoButton
        [primary]="true"
        look="outline"
        aria-label="Cancel"
        (click)="closeEventDetails(false)"
      >
        Cancel
      </button>
      <button kendoButton [primary]="true" aria-label="Add" (click)="addEventData()">

        Add
      </button>
    </div>
  </div>
</kendo-dialog-actions>
</form>

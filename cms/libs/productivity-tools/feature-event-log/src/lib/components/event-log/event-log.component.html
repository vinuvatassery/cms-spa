<div class="app-c-fab-sidePanel sidePanel-event-log">
  <!-- Side Panel Header -->
  <div class="sidePanel_header">
    <div class="sidePanel_header-left">
      <h3>Event Log</h3>
      <button
        kendoButton
        class="k-icon-button small-i-btn"
        title="New event"
        aria-label="add event log"
        (click)="onOpenEventDetailsClicked()"
      >
        <span
          class="material-icons"
          aria-label="add event log"
          aria-hidden="true"
          >add</span
        >
      </button>
    </div>
    <div class="sidePanel_header-right">
      <div class="input-search mat-form-no-b-space" *ngIf="isShownSearch">
          <kendo-textbox aria-label="search event"  placeholder="Search Events"  [fillMode]="formUiStyle.inputFillMode"> 
           </kendo-textbox>
      </div>
      <button
        kendoButton
        class="k-icon-button small-i-btn"
        aria-label="search event"
        (click)="onShowSearchClicked()"
        *ngIf="!isShownSearch"
      >
        <span
          class="material-icons"
          aria-label="search event"
          aria-hidden="true"
          >search</span
        >
      </button>
      <kendo-dropdownbutton
        [data]="actions"
        icon="more-vertical"
        title="More option"
        class="TableActionPopup app-dropdown-action more_action_wid"
        buttonClass="k-icon-button"
        aria-label="more actions"
        [popupSettings]="{ popupClass: popupClassAction, animate: true }"
      >
      <span hidden> More Option</span>
      <ng-template class="app-dropdown-action-list" kendoDropDownButtonItemTemplate let-dataItem>
        <button kendoButton  look="flat" [attr.aria-label]="dataItem.text" [class]="dataItem.buttonType" aria-hidden="false" (click)="dataItem.click">
          <span class="material-icons" [attr.aria-label]="dataItem.text" >{{dataItem.icon}}</span>
          <label>   {{ dataItem.text }} </label>
      </button>
        </ng-template>
      </kendo-dropdownbutton>
      <button
        kendoButton
        class="k-icon-button small-i-btn"
        aria-label="close event log"
        (click)="onCloseEventLogClicked()"
      >
        <span
          class="material-icons"
          aria-label="close event log"
          aria-hidden="true"
          >close</span
        >
      </button>
    </div>
  </div>
  <div class="sidePanel_body">
    <ul aria-label="event log menu" class="event-log-list">
      <!-- Event list items -->
      <li aria-label="event log menu item" class="event-log-list_items"
      *ngFor="let eventLog of eventLogs$ | async; let i = index">
        <section>
          <div class="items-head">
            <p class="items-head_label">Letter Sent</p>
            <p class="items-head_info">
              09-01-2022 by <span class="items-head_info-user">Sara Lisa</span>
            </p>
          </div>
          <div class="items-body">
            <button
              kendoButton
              class="k-icon-button small-i-btn add-sub-button"
              title="New sub-event"
              (click)="onOpenEventDetailsClicked()"
              aria-label="add event log"
            >
              <span
                class="material-icons"
                aria-label="add event log"
                aria-hidden="true"
                >add</span
              >
            </button>
            <span  [ngClass]="'items-body_details text-ellipsis'"  id="{{'detailsList' +i}}"
              >{{eventLog.eventDesc}} </span>            
            <!-- <span class="text-primary text-underline c-pointer"
              >View Letter</span
            > -->
            <span  [ngClass]= "'text-primary text-underline c-pointer'"name ="readMore"  id="readMore{{i}}" (click)="readMore($event,i)"
                  >Read More</span>
                  <span [ngClass]="'text-primary text-underline c-pointer hidden'" name="readLess" id="readLess{{i}}" (click)="readLess($event,i)"
                  >Read Less</span >
          </div>
        </section>
        <!-- Event sub list items -->
        <ul aria-label="event log menu" class="event-log-list" >
          <!-- Event list items -->
          <li aria-label="event log menu item" class="event-log-list_items"
          *ngFor="let subLog of eventLog.subLogs; let j = index">
            <section>
              <div class="items-head">
                <p class="items-head_label">Sub Event One</p>
                <p class="items-head_info">
                  09-01-2022 by
                  <span class="items-head_info-user">Lorem jocks</span>
                </p>
              </div>
              <div class="items-body">
                <button
                  kendoButton
                  class="k-icon-button small-i-btn add-sub-button"
                  title="New sub-event"
                  (click)="onOpenEventDetailsClicked()"
                  aria-label="add event log details"
                >
                  <span
                    class="material-icons"
                    aria-label="add event log details"
                    aria-hidden="true"
                    >add</span
                  >
                </button>
                <span  [ngClass]="'items-body_details text-ellipsis'"  id="{{'detailsList' +i+j}}"
                  >{{subLog.eventDesc}}</span
                >
                <span [ngClass]="'text-primary text-underline c-pointer'" name ="readMore" id="readMore{{i}}{{j}}" (click)="readMore($event,i,j)"
                  >Read More</span
                >
                <span [ngClass]="'text-primary text-underline c-pointer hidden'"name ="readLess"  id="readLess{{i}}{{j}}" (click)="readLess($event,i,j)"
                 >Read Less</span
              >
              </div>
            </section>
          </li>          
        </ul>
      </li>
    </ul>
  </div>
</div>
<!-- Add Event Modal Html-->
<kendo-dialog
  *ngIf="isOpenEventLogDetails"
  (close)="onCloseEventDetailsClicked()"
  class="app-c-modal app-c-modal-lg app-c-modal-np"
>
  <kendo-dialog-titlebar> Add Event </kendo-dialog-titlebar>
  <productivity-tools-event-detail></productivity-tools-event-detail>
</kendo-dialog>

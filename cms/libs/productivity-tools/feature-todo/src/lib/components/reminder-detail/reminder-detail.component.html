<section class="k-dialog-body" [formGroup]="clientReminderForm" kendoTooltip>
  <p class="text-muted" *ngIf="!isDelete">All fields are required unless otherwise stated.</p>
  <p class="text-muted" *ngIf="isDelete"> The reminder will be permanently deleted. You can add another reminder at any time.</p>
  <section>
    <div class="flex-row">
      <div class="flex-col flex-col-6">
        <kendo-floatinglabel text="Due Date">
          <kendo-datepicker
            format="MM/dd/yyyy"
            [fillMode]="formUiStyle.dateInputFillMode"
            formControlName="dueDate"
            formatPlaceholder="formatPattern"           
            placeholder=""            
          >
          </kendo-datepicker>
          <kendo-formerror *ngIf="clientReminderForm.controls['dueDate'].hasError('incorrect')">
            Due date cannot be before the Current Date.</kendo-formerror>
        <kendo-formerror *ngIf="clientReminderForm.hasError('required','dueDate') && isSubmitted">
          Due Date is required.</kendo-formerror>

        </kendo-floatinglabel>
      </div>
      <div class="flex-col flex-col-6">
        <kendo-floatinglabel text="Time (Optional)">
          <kendo-timepicker
            [fillMode]="formUiStyle.dateInputFillMode"
            formControlName="time"
            format="hh:mm a"
            formatPlaceholder="formatPattern"
            (keyup)="timeValidation()"
            (valueChange)="timeValidation()"
          ></kendo-timepicker>
          <kendo-formerror *ngIf="clientReminderForm.controls['time'].hasError('incorrect')">
            Time cannot be before the current time.</kendo-formerror>
        </kendo-floatinglabel>
      </div>
      <div class="flex-col">
        <kendo-floatinglabel text="Description">
          <kendo-textarea
            #tareaReminder
            [fillMode]="formUiStyle.inputFillMode"
            aria-label="custom remider description"
            resizable="auto"
            formControlName="description"
            [maxlength]="tareaRemindermaxLength"
            [value]="tareaReminderDescription"
            (valueChange)="onTareaReminderValueChange($event)"
          >
            <kendo-textarea-suffix class="justify-content-end">
              <span class="counter">{{ tareaReminderCounter }}</span>
            </kendo-textarea-suffix>
          </kendo-textarea>
        </kendo-floatinglabel>
        <kendo-formerror *ngIf="!clientReminderForm.controls['description'].valid && isSubmitted">
          Description is required.</kendo-formerror>
      </div>
      <div class="flex-col field_with_info notop_need" *ngIf="isShowEntityTypeCode">
        <kendo-floatinglabel text="Link Reminder To">
          <kendo-dropdownlist aria-label="Link Reminder To"
           [fillMode]="formUiStyle.dropDownFillMode" 
          formControlName="linkTo"
          (valueChange)="onLinkToChange($event)"
          textField="lovDesc"
          valueField="lovCode"
          [valuePrimitive]="true"
          [data]="entityTypeCodeSubject$ | async "> </kendo-dropdownlist>
        
      </kendo-floatinglabel>

      <span class="material-icons" aria-hidden="true" title="Select a client or service provider if you want this reminder to be displayed in their profile.">info</span>
      </div>
      <div class="flex-col mt-3" *ngIf="isShowEntityTypeCode && showVendorSearch">
        <div class="autoSelect-search mat-form-no-b-space">
          <div class="global-search">
            <span
              class="material-icons global-search-icon"
              aria-label="search"
              aria-hidden="true"
              >search</span
            >
            <span *ngIf="medicalProviderSearchLoaderVisibility$ | async"
            class=" k-icon k-i-loading k-input-loading-icon input-inline-loader">
        </span>
            <kendo-multicolumncombobox
            textField="providerName"
            valueField="providerId"
            [data]="providerSearchResult$ | async"
            [fillMode]="formUiStyle.dropDownFillMode"
            [placeholder]="placeholderText"   
            [allowCustom]="allowCustom"         
            (filterChange)="loadVendorsBySearchText($event)"
            [popupSettings]="{popupClass: 'combotable_search_list', animate: true }"
            [filterable]="true"
            formControlName="vendorId"
            (selectionChange)="providerSelectionChange($event)"
            >
              <kendo-combobox-column [width]="250">
                <ng-template
                  kendoMultiColumnComboBoxColumnCellTemplate
                  let-dataItem
                >
                <span class="pr-1">{{ dataItem.providerName }}</span>
                  <span class="text-muted">{{ dataItem.tin | tin }}</span>
                </ng-template>
              </kendo-combobox-column>
            </kendo-multicolumncombobox>
            <kendo-formerror
            *ngIf="clientReminderForm?.hasError('required','vendorId') && isSubmitted && clientReminderForm.controls['linkTo'].valid">Vendor
            is Required
        </kendo-formerror>
          </div>
        </div>
      </div>
        <div class="flex-col mt-3" *ngIf="isShowEntityTypeCode && showClientSearch"  >
          <div class="global-search mat-form-no-b-space">
            <span
              class="material-icons global-search-icon"
              aria-label="search case"
              aria-hidden="true"
              >search</span
            >

            <span *ngIf="clientSearchLoaderVisibility$ |async"
            class=" k-icon k-i-loading k-input-loading-icon input-inline-loader">
        </span>
                <kendo-multicolumncombobox 
       
          [data]="clientSearchResult$ |async"
          textField="clientFullName"
          valueField="clientId"
          [placeholder]="placeholderText"
          [fillMode]="formUiStyle.dropDownFillMode"
          (filterChange)="loadClientBySearchText($event)"
          [popupSettings]="{popupClass: 'combotable_search_list', animate: true }"
          [filterable]="true"
          formControlName="clientId"
          [loading]="showClientSearchInputLoader"
          (selectionChange)="clientSelectionChange($event)"
          >
          <kendo-combobox-column>
            <ng-template
              kendoMultiColumnComboBoxColumnCellTemplate
              let-dataItem
            >
              <span class="pr-1">{{ dataItem.clientFullName}}</span>
              <span class="pr-1 text-muted">ID {{ dataItem.clientId }}</span>
              <span class="text-muted">SSN {{ dataItem.ssn }}</span>
            </ng-template>
          </kendo-combobox-column>
          
        </kendo-multicolumncombobox>

        <kendo-formerror
        *ngIf="clientReminderForm?.hasError('required','clientId') && isSubmitted && clientReminderForm.controls['linkTo'].valid">Client
        is Required
    </kendo-formerror>
          </div>
        </div>
      
      </div>
      <div class="flex-col mb-1 mt-2" *ngIf="!isDelete">
        <span class="app-checkboxwidtext-wrapper">
          <input
            type="checkbox"
            id="addToOutlookCalender"
            kendoCheckBox
            aria-labelledby="addToOutlookCalender"
            formControlName="addToOutlookCalender"
          />
          <label class="k-checkbox-label" for="addToOutlookCalender"
            >Add to Outlook Calendar</label
          >
        </span>
      </div>
    
      <div class="flex-col mb-1 mt-2" *ngIf="isDelete">
        <span class="app-checkboxwidtext-wrapper">
          <input
            type="checkbox"
            id="deleteFromOutlookCalender"
            kendoCheckBox
            aria-labelledby="deleteFromOutlookCalender"
            formControlName="deleteFromOutlookCalender"
          />
          <label class="k-checkbox-label" for="deleteFromOutlookCalender"
            >Delete event from Outlook Calendar</label
          >
        </span>
      </div>

  </section>
</section>
<kendo-dialog-actions kendoTooltip>
  <div class="justify-content-between">
  <div class="justify-content-end">
    <button
      kendoButton
      [primary]="true"
      look="outline"
      aria-label="Cancel"
      (click)="onCloseReminderClicked()"
    >
      Cancel
    </button>
    <button *ngIf="!isDelete" kendoButton [primary]="true" (click)="save()"  
    aria-label="Create" class="mr-2" >
      {{isEdit ? 'Update': 'Create'}} 
    </button>
    <div>
      <button *ngIf="isEdit || isDelete"  kendoButton aria-label="Delete" 
      class="k-error-button" (click)="delete()">  Delete     </button>
      
      </div>

  </div>
  </div>
</kendo-dialog-actions>

<kendo-grid [data]="gridUserAssignedRoles$ | async" 
    [pageSize]="state.take" 
    [pageable]="false" 
    [skip]="state.skip"
    [sort]="state.sort" 
    [resizable]="true" 
    [sortable]="false"
    (dataStateChange)="dataStateChange($event)"
    [loading]="(loader$ | async) === true"
    [rowClass]="rowClass">
    <kendo-grid-column field="roleDesc" title="Role Assigned" [width]="190">
        <ng-template kendoGridCellTemplate let-dataItem>
            <span class="d-flex align-items-center">
                <span [ngClass]="getRolesClassByRoleCode(dataItem)"></span>{{ dataItem.roleDesc }}
            </span>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="lastModificationTime" title="Last Modified" [width]="120">
        <ng-template kendoGridCellTemplate let-dataItem>
            {{dataItem.lastModificationTime |date:'MM/dd/YYYY'}}
          </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="lastModifierId" title="Modified By" [width]="80" [sortable]="false" [filterable]="false" class="text-center">
        <ng-template kendoGridCellTemplate let-dataItem>
          <common-user-photo-icon 
              [userId]="dataItem.lastModifierId" 
              [userFirstName]="dataItem.userFirstName"
              [userLastName]="dataItem.userLastName" 
              [userProfilePhotoExists]="dataItem.isUserProfilePhotoExist"
              [linkType]="'profileIcon'"
              [userPhotos$]="rolesUserListProfilePhoto$"></common-user-photo-icon>
        </ng-template>
      </kendo-grid-column>
      <kendo-grid-column field="activeFlag" title="Status" [width]="120">
        <ng-template kendoGridCellTemplate let-dataItem>
            <span class="d-flex align-items-center">
                <span class="getRolesClassByRoleCode(dataItem)"></span>{{ dataItem.activeFlag }}
            </span>
        </ng-template>
      </kendo-grid-column>
    <kendo-grid-column field="" title="Options" [width]="70" class="text-center" [columnMenu]="false">
        <ng-template *ngIf="assignedRoleCount > 1 && userStatus === active" kendoGridCellTemplate let-dataItem>
            <kendo-dropdownbutton [data]="moreactions" title="More option" aria-label="more actions"
                class="TableActionPopup app-dropdown-action more_action_wid" buttonClass="k-icon-button"
                [popupSettings]="{ popupClass: popupClassAction, animate: true }">
                <span class="material-icons" aria-label="More option"> more_vert </span>
                <ng-template class="app-dropdown-action-list" kendoDropDownButtonItemTemplate let-buttondataItem>
                    <ng-container
                      *ngIf="buttondataItem.text === 'Deactivate' && dataItem.activeFlag ==='Active' && assignedRoleCount > 1; else reactivate">
                      <button kendoButton look="flat" 
                        [attr.aria-label]="buttondataItem.text"
                        [class]="buttondataItem.buttonType" 
                        aria-hidden="false" 
                        (click)="buttondataItem.click(dataItem)">
                        <span class="material-icons" aria-hidden="true" [attr.aria-label]="buttondataItem.text">{{buttondataItem.icon}}</span>
                        <label> {{ buttondataItem.text }} </label>
                      </button>
                    </ng-container>
                    <ng-template #reactivate>
                      <ng-container
                        *ngIf="buttondataItem.text === 'Reactivate' && dataItem.activeFlag ==='Inactive' && assignedRoleCount > 1">
                        <button kendoButton look="flat" [attr.aria-label]="buttondataItem.text"
                          [class]="buttondataItem.buttonType" aria-hidden="false" (click)="buttondataItem.click(dataItem)"
                          >
                          <span class="material-icons" aria-hidden="true"
                            [attr.aria-label]="buttondataItem.text">{{buttondataItem.icon}}</span>
                          <label> {{ buttondataItem.text }} </label>
                        </button>
                      </ng-container>
                    </ng-template>
                </ng-template>
            </kendo-dropdownbutton>
        </ng-template>
    </kendo-grid-column>
</kendo-grid>
<!-- Deactivate User Modal Html-->
<kendo-dialog *ngIf="isUserDeactivatePopup" (close)="onUserDeactivateClosed()"
  class="app-c-modal app-c-modal-sm app-c-modal-np">
  <kendo-dialog-titlebar> Deactivate User </kendo-dialog-titlebar>
  <system-config-deactivate-user-confirmation></system-config-deactivate-user-confirmation>
</kendo-dialog>
<!-- employer form details -->
<form class="k-form" [formGroup]="drugForm">
    <section class="k-dialog-body">
        <p class="text-muted mb-1">
            All fields are required unless otherwise stated.
        </p>
        <div class="flex-row">

          <div class="flex-col mb-1">
            <kendo-floatinglabel text="Manufacturer">
                <kendo-dropdownlist [data]="vendorDetails$ | async" [fillMode]="formUiStyle.dropDownFillMode"  [valuePrimitive]="true"  textField="vendorName"
                    valueField="vendorId" aria-label="Manufacturer" formControlName="manufacturer" [disabled]="false">
                </kendo-dropdownlist>
            </kendo-floatinglabel>
          </div>
          <div class="flex-col mb-1">
            <kendo-floatinglabel text="NDC Code">
                <kendo-textbox
                aria-label="NDC Code"
                [fillMode]="formUiStyle.inputFillMode"
                formControlName="ndcNbr"
              >
              </kendo-textbox>
              </kendo-floatinglabel>
              <kendo-formerror *ngIf="(!drugForm.controls['ndcNbr'].valid) && isSubmitted">
                NDC number is required.
              </kendo-formerror>
        </div>

            <div class="flex-col mb-1">
                <kendo-floatinglabel text="Drug Name">
                    <kendo-textbox placeholder="Drug Name" [fillMode]="formUiStyle.inputFillMode" formControlName="drugName">
                    </kendo-textbox>
                </kendo-floatinglabel>
                <kendo-formerror  *ngIf="(!drugForm.controls['drugName'].valid) && isSubmitted">
                  Drug name is required.
                </kendo-formerror>
            </div>

            <div class="flex-col mb-1">

              <kendo-floatinglabel text="Brand Name">
                  <kendo-textbox aria-label="Brand Name" [fillMode]="formUiStyle.inputFillMode" formControlName="brandName">
                  </kendo-textbox>
              </kendo-floatinglabel>
              <kendo-formerror  *ngIf="(!drugForm.controls['brandName'].valid) && isSubmitted">
                Brand name is required.
              </kendo-formerror>
          </div>

            <div class="flex-col mb-1">
                <kendo-floatinglabel text="Delivery Method">
                    <kendo-dropdownlist [fillMode]="formUiStyle.dropDownFillMode" textField="deliveryMethodCode"
                        valueField="deliveryMethodCode" [data]="deliveryMethodCodes" aria-label="State" [valuePrimitive]="true" formControlName="deliveryMethodCode">
                    </kendo-dropdownlist>
                </kendo-floatinglabel>
                <kendo-formerror *ngIf="(!drugForm.controls['deliveryMethodCode'].valid) &&isSubmitted">A Delivery Method code must be
                  selected</kendo-formerror>
            </div>
           <!-- Drug Type Checkbox Validation -->
            <div class="flex-col mb-1 mt-1">
              <fieldset class="k-form-fieldset no_margin_fieldset">
                <legend class="k-form-legend">
                  <h5>Drug Type (Select all that apply)</h5>
                </legend>
                <div class="component-list-h">
                  <span class="app-checkboxwidtext-wrapper">
                    <input type="checkbox" kendoCheckBox aria-labelledby="HIV" required id="HIV" formControlName="hiv" [checked]="drugForm.get('hiv')?.value" (change)="updateDrugTypeValidity()" />
                    <label class="k-checkbox-label" for="HIV"> HIV </label>
                  </span>
                  <span class="app-checkboxwidtext-wrapper">
                    <input type="checkbox" kendoCheckBox aria-labelledby="Hepatitis" required id="Hepatitis" formControlName="hepatitis" [checked]="drugForm.get('hepatitis')?.value" (change)="updateDrugTypeValidity()" />
                    <label class="k-checkbox-label" for="Hepatitis"> Hepatitis </label>
                  </span>
                  <span class="app-checkboxwidtext-wrapper">
                    <input type="checkbox" kendoCheckBox required aria-labelledby="Opportunistic Infection" id="OpportunisticInfection" formControlName="opportunisticInfection" [checked]="drugForm.get('opportunisticInfection')?.value" (change)="updateDrugTypeValidity()" />
                    <label class="k-checkbox-label" for="OpportunisticInfection"> Opportunistic Infection </label>
                  </span>
                </div>
              </fieldset>
              <kendo-formerror *ngIf="!updateDrugTypeValidity() && isSubmitted">
                Please select at least one drug type.
              </kendo-formerror>
            </div>
        </div>
    </section>
    <kendo-dialog-actions>
        <div class="justify-content-between mt-2">
            <div>
                <button *ngIf="dialogTitle==='Edit'" kendoButton [primary]="true" look="flat" aria-label="deactivate drug"> Deactivate </button>
            </div>
            <div class="justify-content-end">
                <button kendoButton [primary]="true" aria-label="cancel drug" look="outline" (click)="onCancelClick()"> Cancel </button>
                <button kendoButton [primary]="true" aria-label="add new drug" (click)="save()"> {{dialogTitle==="Add"?"Add":"Update"}} </button>
            </div>
        </div>
    </kendo-dialog-actions>
</form>

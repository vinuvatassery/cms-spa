<section class="k-dialog-body">
    <p class="text-muted mb-2" *ngIf="tabStatus === 'hlt-ins-prm-pym'"> {{isPaymentAddForm ? 'Add a new medical payment':'Edit or delete dental payment'}} </p>
    <p class="text-muted mb-2" *ngIf="tabStatus === 'dnt-ins-prm-pym'"> {{isPaymentAddForm ? 'Add a new dental payment':'Edit or delete dental payment'}} </p>

    <form [formGroup]="copayPaymentForm">
        <div class="flex-row">
    
            <div class="flex-col">
                <kendo-floatinglabel text="Service Provider Name" >   
                    <kendo-combobox   
                    aria-label="Service Provider Name"
                    [fillMode]="formUiStyle.dropDownFillMode"  
                    [loading] = "isLoading$ | async"
                    formControlName="vendorId"     
                    [data]="carrierNames$ | async"   
                    textField="vendorName" 
                    valueField="vendorId"
                    [valuePrimitive]="true"       
                    [filterable]="true"     
                    [kendoDropDownFilter]="caseOwnerfilterSettings"    
                    (valueChange)="serviceProviderNameChange($event)" 
                  >
                  </kendo-combobox>
                  </kendo-floatinglabel>
                <kendo-formerror *ngIf="!copayPaymentForm.controls['vendorId'].valid">Service Provider Name
                    is required.</kendo-formerror>
    
            </div>
            <div class="flex-col">
                    <kendo-floatinglabel text="Insurance Policy Name" >   
                        <kendo-combobox   
                        aria-label="Insurance Policy Name"
                        [fillMode]="formUiStyle.dropDownFillMode" 
                        [loading] = "isInsurancePoliciesLoading" 
                        formControlName="clientInsurancePolicyId"     
                        [data]="insurancePoliciesList"   
                        textField="policyValueField" 
                        valueField="clientInsurancePolicyId"
                        [valuePrimitive]="true"       
                        [filterable]="true"     
                        [kendoDropDownFilter]="caseOwnerfilterSettings"      
                      >
                      </kendo-combobox>
                    
                      </kendo-floatinglabel>
                      <kendo-formerror *ngIf="!copayPaymentForm.controls['clientInsurancePolicyId'].valid">Insurance Policy is required.</kendo-formerror>
            </div>
            <div class="flex-col">
                <kendo-floatinglabel text="Service Description">
                    <kendo-textbox formControlName="serviceDescription" aria-label="Service Description" [disabled]="true"
                        [fillMode]="formUiStyle.inputFillMode">
                    </kendo-textbox>
                </kendo-floatinglabel>
            </div>
            <div class="flex-col">
                <div class="flex-row">
                    <div class="flex-col flex-col-6">
                        <kendo-floatinglabel text="Premium Amount" class="amount-with-symbol">
                            <span class="k-input-prefix custom-currencysymbol"> $ </span>
                            <kendo-textbox formControlName="amountRequested" aria-label="Premium Amount" placeholder=""
                                [fillMode]="formUiStyle.inputFillMode">
                            </kendo-textbox>
                            <kendo-formerror *ngIf="!copayPaymentForm.controls['amountRequested'].valid">Payment Amount is
                                required.</kendo-formerror>
                        </kendo-floatinglabel>
                    </div>
                    <div class="flex-col flex-col-6">
                        <kendo-floatinglabel text="Type">
                            <kendo-dropdownlist formControlName="paymentTypeCode" aria-label="Type" [fillMode]="formUiStyle.dropDownFillMode"
                                    [data]="paymentRequestType$ | async" valueField="lovCode" textField="lovDesc" [valuePrimitive]="true"
                                    [loading]="(paymentRequestType$ | async)?.length===0">
                            
                                </kendo-dropdownlist>
                        </kendo-floatinglabel>
                        <kendo-formerror *ngIf="!copayPaymentForm.controls['paymentTypeCode'].valid">Type is
                            required.</kendo-formerror>
                    </div>
                </div>
            </div>
           
            <div class="flex-col">
                <div class="flex-row">
                    <div class="flex-col flex-col-6">
                        <kendo-floatinglabel text="Service Start Date">
                            <kendo-datepicker formControlName="serviceStartDate"
                                [fillMode]="formUiStyle.dateInputFillMode" format="MM-dd-yyyy"
                                aria-label="Coverage Start Date" formatPlaceholder="formatPattern" placeholder="">
                            </kendo-datepicker>
                        </kendo-floatinglabel>
                        <kendo-formerror *ngIf="!copayPaymentForm.controls['serviceStartDate'].valid">Service Start
                            Date is required.</kendo-formerror>
    
                    </div>
                    <div class="flex-col flex-col-6">
                        <kendo-floatinglabel text="Service End Date">
                            <kendo-datepicker formControlName="serviceEndDate"
                                [fillMode]="formUiStyle.dateInputFillMode" format="MM-dd-yyyy"
                                aria-label="Coverage End Date" formatPlaceholder="formatPattern" placeholder="">
                            </kendo-datepicker>
                        </kendo-floatinglabel>
                        <kendo-formerror *ngIf="!copayPaymentForm.controls['serviceEndDate'].valid">Service End
                            Date is required.</kendo-formerror>
    
    
                    </div>
                </div>
            </div>
            <div class="flex-col">
                <div class="flex-row">
                    <div class="flex-col flex-col-6">
                        <kendo-floatinglabel text="Entry Date">
                            <kendo-datepicker formControlName="entryDate" [fillMode]="formUiStyle.dateInputFillMode"
                                format="MM-dd-yyyy" aria-label="Entry Date" formatPlaceholder="formatPattern"
                                placeholder="">
                            </kendo-datepicker>
                        </kendo-floatinglabel>
                    </div>
                    
                </div>
            </div>
    
            <div class="flex-col">
                <kendo-floatinglabel text="Comment">
                    <kendo-textarea formControlName="comments" aria-label="Comment"
                        [fillMode]="formUiStyle.inputFillMode">
                    </kendo-textarea>
                    <kendo-formerror *ngIf="!copayPaymentForm.controls['comments'].valid">Comment is
                        required.</kendo-formerror>
    
                </kendo-floatinglabel>
            </div>
        </div>
    </form>
</section>

<kendo-dialog-actions>
    <div class="justify-content-between">
        <div>
            <button  *ngIf="!isPaymentAddForm" kendoButton class="k-danger-link" aria-label="delete Payment"> Delete </button>
            <button *ngIf="!isPaymentAddForm" kendoButton [primary]="true" look="outline" aria-label="edit Payment"> Edit </button>
        </div>
        <div class="justify-content-end">
            <button kendoButton [primary]="true" look="outline" aria-label="cancel adding Payment"> Cancel  </button>
            <button kendoButton [primary]="true" aria-label="add new Payment" (click)="savePaymentDetailsClicked()"> Add</button>

        </div>
    </div>
</kendo-dialog-actions>
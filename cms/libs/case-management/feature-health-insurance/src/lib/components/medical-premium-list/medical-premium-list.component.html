<div class="flex-row">
  <div class="flex-col">
    <div class="app-c-table">
      <kendo-grid [data]="medicalHealthPlans$ |async">
        <kendo-grid-column field="FullDetail" title="Full Detail" [width]="75">
          <ng-template kendoGridCellTemplate let-dataItem
            ><button
              kendoButton
              look="flat"
              class="card-link-button"
              (click)="handleHealthInsuranceOpenClicked('view')"
              (click)="handleInsuranceType(dataItem.InsuranceType)"
              aria-label="view medical premium"
            >
              View
            </button></ng-template
          >
        </kendo-grid-column>
        <kendo-grid-column
          field="healthInsuranceTypeDesc"
          title="Health Insurance Type"
          [width]="140"
        ></kendo-grid-column>
        <kendo-grid-column field="priorityDesc" title="Priority" [width]="100">
        </kendo-grid-column>
        <kendo-grid-column
          field="insuranceCarrierName"
          title="Insurance Carrier Name"
          [width]="150"
        >
          <ng-template kendoGridCellTemplate let-dataItem
            ><button
              kendoButton
              look="flat"
              class="card-link-button"
              aria-label="carrier name"
            >
              {{ dataItem.insuranceCarrierName }}
            </button></ng-template
          >
        </kendo-grid-column>
        <kendo-grid-column
          field="insurancePlanName"
          title="Insurance Plan Name"
          [width]="150"
        >
          <ng-template kendoGridCellTemplate let-dataItem
            ><button
              kendoButton
              look="flat"
              class="card-link-button"
              aria-label="plan name"
            >
              {{ dataItem.insurancePlanName }}
            </button></ng-template
          >
        </kendo-grid-column>
        <kendo-grid-column
          field="premiumAmt"
          title="Premium Paid"
          [width]="110"
        ></kendo-grid-column>
        <kendo-grid-column
          field="premiumFrequencyDesc"
          title="Frequency"
          [width]="110"
        ></kendo-grid-column>
        <kendo-grid-column
          field="startDate"
          title="Start Date"
          [width]="110"
        >
        <ng-template  kendoGridCellTemplate let-dataItem>
            {{dataItem.startDate |date: 'MM/dd/yyyy'}}
        </ng-template>
      
      </kendo-grid-column>
        <kendo-grid-column
          field="endDate"
          title="End Date"
          [width]="110"
        >
        <ng-template  kendoGridCellTemplate let-dataItem>
          {{dataItem.endDate |date: 'MM/dd/yyyy'}}
      </ng-template>
    </kendo-grid-column>
        <kendo-grid-column
          field="careassistPayingPremiumFlag"
          title="CAREAssist paying premium?"
          [width]="150"
          class="text-center"
        >
        </kendo-grid-column>
        <kendo-grid-column
          field="Option"
          title="Option"
          [width]="75"
          [sticky]="true"
          class="text-center"
        >
          <ng-template kendoGridCellTemplate let-dataItem>
            <kendo-dropdownbutton
              [data]="actions"
              icon="more-vertical"
              class="TableActionPopup app-dropdown-action"
              buttonClass="k-icon-button"
              aria-label="more actions"
              [popupSettings]="{ popupClass: popupClassAction, animate: true }"
            >
      
            <ng-template class="app-dropdown-action-list" kendoDropDownButtonItemTemplate let-dataItem>
              <button kendoButton  look="flat" [attr.aria-label]="dataItem.text" [class]="dataItem.buttonType" aria-hidden="false" (click)="dataItem.click">
                <span class="material-icons" [attr.aria-label]="dataItem.text" >{{dataItem.icon}}</span>
                <label>   {{ dataItem.text }} </label>
            </button>
                <!-- <button
                  kendoButton
                  icon="edit"
                  look="flat"
                  class="btn-h-primary"
                  (click)="handleHealthInsuranceOpenClicked('edit')"
                  (click)="handleInsuranceType(dataItem.InsuranceType)"
                  aria-label="edit insurance"
                >
                  Edit Insurance
                </button>
                <button
                  kendoButton
                  look="flat"
                  class="btn-h-primary"
                  (click)="onChangePriorityOpenClicked()"
                  aria-label="change priority"
                >
                  <span
                    class="material-icons"
                    aria-label="format line spacing"
                    aria-hidden="true"
                    >format_line_spacing</span
                  >Change Priority
                </button>
                <button
                  kendoButton
                  icon="delete"
                  look="flat"
                  class="btn-h-danger"
                  (click)="onDeleteConfirmOpenClicked()"
                  aria-label="delete insurance"
                >
                  Delete Insurance
                </button> -->
              </ng-template>
            </kendo-dropdownbutton>
          </ng-template>
        </kendo-grid-column>
      </kendo-grid>
    </div>
    <div class="flex-row">
      <div class="flex-col mt-1">
        <button
          kendoButton
          [primary]="true"
          icon="add"
          (click)="handleHealthInsuranceOpenClicked('add')"
          aria-label="add health insurance"
        >
          Health Insurance
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Add Health Insurance  Modal -->
<kendo-dialog
  *ngIf="isOpenedHealthInsuranceModal"
  (close)="handleHealthInsuranceCloseClicked()"
  class="app-c-modal app-c-modal-md app-c-modal-np"
>
  <kendo-dialog-titlebar>
    {{ dialogTitle + ' Health Insurance' }}
  </kendo-dialog-titlebar>
  <case-management-medical-premium-detail
    [dialogTitle]="dialogTitle"
    (isCloseInsuranceModal)="handleHealthInsuranceCloseClicked()"
    (editRedirect)="handleHealthInsuranceOpenClicked('edit')"
    [insuranceType]="insuranceType"
    [healthInsuranceForm]="healthInsuranceForm"
  ></case-management-medical-premium-detail>
</kendo-dialog>

<!-- Change Priority Modal -->
<kendo-dialog
  *ngIf="isOpenedChangePriorityModal"
  (close)="onChangePriorityCloseClicked()"
  class="app-c-modal app-c-modal-sm app-c-modal-np"
>
  <kendo-dialog-titlebar> Change Priority </kendo-dialog-titlebar>
  <case-management-set-health-insurance-priority></case-management-set-health-insurance-priority>
</kendo-dialog>

<!-- Delete Modal -->
<kendo-dialog
  *ngIf="isOpenedDeleteConfirm"
  (close)="onDeleteConfirmCloseClicked()"
  class="app-c-modal app-c-modal-sm app-c-modal-np"
>
  <kendo-dialog-titlebar> Delete Health Insurance? </kendo-dialog-titlebar>
  <section class="k-dialog-body mb-2">
    <p>
      The clientâ€™s personal insurance info will be permanently deleted, and the
      insurance carriers and plans will no longer be associated with this
      client.
    </p>
  </section>
  <kendo-dialog-actions>
    <div class="justify-content-between">
      <div class="justify-content-end">
        <button
          kendoButton
          [primary]="true"
          look="outline"
          aria-label="cancel adding health insurance"
        >
          Cancel
        </button>
        <button
          kendoButton
          class="k-error-button"
          aria-label="delete health insurance"
        >
          Delete
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>

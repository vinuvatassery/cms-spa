<div class="flex-row">
  <div class="flex-col" *ngFor="let item of tareaMessages">
    <div class="sms-text-header">
      <h5>Message</h5>
      <div>
        <button
          kendoButton
          #anchor
          (click)="onToggleInsertVariableClicked()"
          class="text-t-normal"
          aria-label="Insert a variable"
          title="Insert a variable"
        >
          Insert a variable
          <span
            class="material-icons"
            aria-label="dropdown arrow"
            aria-hidden="true"
            >arrow_drop_down</span
          >
        </button>
        <kendo-popup
          #popup
          [anchor]="$any(anchor)"
          *ngIf="isShowPopupClicked"
          popupClass="notification-inner"
        >
        <div class="sms-popup-content">
          <div class="variable-search-block">
            <div class="input-search mat-form-no-b-space">
              <div  class="medium-input-form sms-variable-search_input"  >
                <kendo-textbox aria-label="input a variable"  placeholder="Search" [fillMode]="formUiStyle.inputFillMode">   </kendo-textbox>
              </div>
            </div>
            <button
              kendoButton
              class="k-icon-button sms-variable-search_close"
              (click)="onSearchClosed()"
              aria-label="Close"
              title="Close"
            >
              <span
                class="material-icons"
                aria-label="Close"
                aria-hidden="true"
                >close</span
              >
            </button>
          </div>
          <div class="var-list-block">
            <section>
              <h5>Client Variables</h5>
              <ul
                class="var-list-item"
                aria-label="client variables"
                *ngFor="let item of clientVariables"
              >
                <li (click)="BindVariableToEditor(editor, item.lovCode)" *ngIf="item.parentCode =='CER_CLIENT_VARIABLE'" aria-label="client variables item">{{ item.lovDesc }}</li>
              </ul>
            </section>
            <section>
              <h5>My Variables</h5>
              <ul
                class="var-list-item"
                aria-label="my variables"
                *ngFor="let item of clientVariables"
              >
                <li (click)="BindVariableToEditor(editor, item.lovCode)" *ngIf="item.parentCode =='CER_CASE_WORKER_VARIABLE'" aria-label="my variables item">{{ item.lovDesc }}</li>
              </ul>
            </section>
            <section>
              <h5>Other Variables</h5>
              <ul
                class="var-list-item"
                aria-label="other variables"
                *ngFor="let item of clientVariables"
              >
                <li (click)="BindVariableToEditor(editor, item.lovCode)" *ngIf="item.parentCode =='CER_OTHER_VARIABLE'" aria-label="other variables item">{{ item.lovDesc }}</li>
              </ul>
            </section>
          </div>
        </div>
        <case-management-send-text-message
        (editorValue)="smsEditorValueEvent($event)"
        ></case-management-send-text-message>
        </kendo-popup>
        <button
          kendoButton
          class="k-danger-link"
          (click)="onDeleteMessageClicked(item.id)"
          aria-label="Delete"
        >
          Delete
        </button>
      </div>
    </div>
    <kendo-floatinglabel text="" class="pt-0">
      <kendo-textarea
        [fillMode]="formUiStyle.inputFillMode"
        name="Message Description"
        [rows]="6"
        [cols]="40"
        [maxlength]="tareaMessageMaxLength"
        [value]="templateContent"
        [id]="item.id"
        (valueChange)="onMessageValueChange($event, item.id)"
        [(ngModel)]="item.description"
        aria-label="message description"
      >
      <kendo-textarea-suffix class="justify-content-end"> <span  class="counter">  {{ item.wordCount }}/{{ tareaMessageMaxLength }} </span> </kendo-textarea-suffix>
      </kendo-textarea>
   
    </kendo-floatinglabel>
  </div>
  <div class="flex-col">
    <button
      kendoButton
      [primary]="true"
      look="flat"
      icon="add"
      (click)="onAddNewMessageClicked()"
      aria-label="Message"
    >
      Message
    </button>
  </div>
</div>

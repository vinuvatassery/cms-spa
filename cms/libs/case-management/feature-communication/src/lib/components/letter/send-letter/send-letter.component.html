<kendo-dialog *ngIf="isNewLetterClicked" class="app-c-modal app-c-modal-lg app-c-modal-np" title="Send New Letter"
  (close)="onCloseNewLetterClicked()">
  <section class="k-dialog-body">
    <p class="text-muted mb-1">
      Select an existing template or draft a custom letter.
    </p>
    <div class="flex-row pb-2">
      <div class="flex-col">
        <case-management-template-picker 
          [data]="letterTemplatedata"
          [valueField] ="'documentTemplateId'"
          [textField]="'templateDescription'"
          (handleDdlLetterValueChange)="handleDdlLetterValueChange($event)">
          (openDdlLetterEvent)="handleOpenTemplateClicked()">
        </case-management-template-picker>
      </div>
      <div *ngIf="isOpenLetterTemplate" class="mt-2">
        <div class="flex-col mb-2">
          <p class="text-capital text-bold">Mailing Address</p>
          <span *ngIf="mailingAddress$ | async as mailingAddress">
            <p *ngIf="mailingAddress?.address1">{{ mailingAddress?.address1 }}</p>
            <p *ngIf="mailingAddress?.address2 || mailingAddress?.city">{{ mailingAddress?.address2 }} </p>
            <p>{{ mailingAddress?.city }}, {{ mailingAddress?.state }} {{ mailingAddress?.zip}}</p>
          </span>
          <div style="width:60%" *ngIf="!(mailingAddress$ | async)">
            <kendo-skeleton shape="text" animation="pulse" width="40%"></kendo-skeleton>
            <p></p>
            <kendo-skeleton shape="text" animation="pulse" width="60%"></kendo-skeleton>
            <p></p>
            <kendo-skeleton shape="text" animation="pulse" width="60%"></kendo-skeleton>
          </div>
        </div>
        <div class="flex-col">
          <p>
            Type the body of the letter. Click “Preview Letter” to see what the
            client will receive. Attachments will not appear in the preview, but
            will be printed with the letter.
          </p>
        </div>
        <div class="flex-col">
          <case-management-letter-editor [dataEvent]="letterEditorValueEvent"
             [datatemplate]="selectedTemplate"
            (editorValue)="handleLetterEditor($event)"></case-management-letter-editor>
        </div>
      </div>
    </div>
  </section>

  <kendo-dialog-actions *ngIf="isOpenLetterTemplate">
    <div class="justify-content-between bigbtn-wrapper">
      <div class="w100">
        <button kendoButton [primary]="true" look="flat" (click)="onSaveForLaterClicked()" aria-label="save for later">
          Save for Later
        </button>
        <button kendoButton [primary]="true" look="flat" (click)="onPreviewLetterClicked()" aria-label="preview letter">
          Preview Letter
        </button>
      </div>
      <div class="justify-content-end">
        <button kendoButton [primary]="true" look="outline" (click)="onCloseNewLetterClicked()"
          aria-label="cancel letter">
          Cancel
        </button>
        <button kendoButton [primary]="true" (click)="onSendLetterToPrintClicked()" aria-label="send to print">
          Send To Print
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>

<!-- Save for Latter (Letter Draft) Modal -->
<kendo-dialog *ngIf="isShowSaveForLaterPopupClicked" (close)="onCloseSaveForLaterClicked()"
  class="app-c-modal app-c-modal-sm app-c-modal-np" title="Letter Draft Saved">
  <section class="k-dialog-body">
    <p>
      To pick up where you left off, click “New Letter” from the client’s
      profile.
    </p>
  </section>
  <kendo-dialog-actions>
    <div class="justify-content-between">
      <div class="justify-content-end">
        <button kendoButton [primary]="true" (click)="onCloseSaveForLaterClicked()"
          aria-label="confirmation for save for later">
          OK
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>

<!-- Letter Preview Modal -->
<kendo-dialog *ngIf="isShowPreviewLetterPopupClicked" class="app-c-modal app-c-modal-lg app-c-modal-np no-title-actions"
  title="Preview Letter">
  <case-management-preview-letter [letterContent]="letterContentValue"></case-management-preview-letter>
  <kendo-dialog-actions>
    <div class="justify-content-between bigbtn-wrapper ">
      <div class="w100">
        <button kendoButton [primary]="true" look="flat" (click)="onSendNewLetterClicked()" aria-label="edit letter">
          Edit Letter
        </button>
      </div>
      <div class="justify-content-end align-items-center">
        <span class="pr-2">3 attachment(s) to be pinned</span>
        <button kendoButton [primary]="true" (click)="onSendLetterToPrintClicked()" aria-label="send to print">
          Send To Print
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>

<!--Send Letter to print Modal -->
<kendo-dialog *ngIf="isShowSendLetterToPrintPopupClicked" (close)="onSendLetterToPrintDialogClicked('Close')"
  class="app-c-modal app-c-modal-sm app-c-modal-np" title="Send letter to print?">
  <section class="k-dialog-body">
    <p class="text-muted mb-2">The action cannot be undone</p>
  </section>
  <kendo-dialog-actions>
    <div class="justify-content-between  ">
      <div class="w100">
        <button kendoButton [primary]="true" look="flat" (click)="onSendNewLetterClicked()" aria-label="edit letter">
          Edit Letter
        </button>
      </div>
      <div class="justify-content-end align-items-center">
        <button kendoButton [primary]="true" (click)="onSendLetterToPrintDialogClicked('Print')"
          aria-label="print letter">
          Print
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>
<kendo-dialog
  *ngIf="isOpenSendEmailClicked"
  (close)="onCloseSendEmailClicked()"
  class="app-c-modal app-c-modal-lg app-c-modal-np"
  title="Send New Email "
>
  <section class="k-dialog-body">
    <p class="text-muted mb-2">
      Select an existing template or draft a custom email.
    </p>
    <div class="flex-row">
      <div class="flex-col">
        <kendo-floatinglabel text="Letter Templates">
          <kendo-dropdownlist
          fillMode="outline"
            [data]="ddlTemplates"
            textField="value"
            valueField="key"
            (valueChange)="handleDdlEmailValueChange()"
          >
          </kendo-dropdownlist>
        </kendo-floatinglabel>
      </div>
      <div *ngIf="isOpenDdlEmailDetails">
        <div class="flex-col">
          <kendo-floatinglabel text="To">
            <kendo-multiselect
            fillMode="outline"
              [data]="ddlEmails$ | async"
              aria-label="to address"
            ></kendo-multiselect>
          </kendo-floatinglabel>
        </div>
        <div class="flex-col">
          <kendo-floatinglabel text="CC">
            <kendo-multiselect
            fillMode="outline"
              [data]="ddlEmails$ | async"
              aria-label="cc of email"
            ></kendo-multiselect>
          </kendo-floatinglabel>
        </div>
        <div class="flex-col">
          <kendo-floatinglabel text="Subject">
            <kendo-textbox aria-label="subject of email" fillMode="outline">   </kendo-textbox>
            <!-- <input kendoTextBox aria-label="subject of email" /> -->
          </kendo-floatinglabel>
        </div>
        <div class="flex-col">
          <p>
            Type the body of the email. The email header and footer generate
            from Admin settings. Click "Preview Email" to what the client will
            receive.
          </p>
        </div>
        <div class="flex-col mt-3">
          <case-management-email-editor
            [dataEvent]="emailEditorValueEvent"
            (editorValue)="handleEmailEditor($event)"
            class="editor-lg-email"
          ></case-management-email-editor>
        </div>
      </div>
    </div>
  </section>
  <kendo-dialog-actions *ngIf="isOpenDdlEmailDetails">
    <div class="justify-content-between">
      <div class="w100">
        <button
          kendoButton
          [primary]="true"
          look="flat"
          (click)="onSaveForLaterClicked()"
          aria-label="save for later"
        >
          Save for Later
        </button>
        <button
          kendoButton
          [primary]="true"
          look="flat"
          (click)="onPreviewEmailClicked()"
          aria-label="preview letter"
        >
          Preview Letter
        </button>
      </div>
      <div class="justify-content-end">
        <button
          kendoButton
          [primary]="true"
          look="outline"
          (click)="onCloseSendEmailClicked()"
          aria-label="cancel email"
        >
          Cancel
        </button>
        <button
          kendoButton
          [primary]="true"
          (click)="onSendEmailConfirmationClicked()"
          aria-label="send email"
        >
          Send Email
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>
<!-- Save for Latter (Email Draft) Modal -->
<kendo-dialog
  *ngIf="isShowSaveForLaterPopupClicked"
  (close)="onCloseSaveForLaterClicked()"
  class="app-c-modal app-c-modal-sm app-c-modal-np"
  title="Email Draft Saved"
>
  <section class="k-dialog-body">
    <p>
      To pick up where you left off, click “New Email” from the client’s
      profile.
    </p>
  </section>
  <kendo-dialog-actions>
    <div class="justify-content-between">
      <div class="justify-content-end">
        <button
          kendoButton
          [primary]="true"
          (click)="onCloseSaveForLaterClicked()"
          aria-label="confirmation for save for later"
        >
          OK
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>

<!-- Email Preview Modal -->
<kendo-dialog
  *ngIf="isShowPreviewEmailPopupClicked"
  class="app-c-modal app-c-modal-lg app-c-modal-np no-title-actions"
  title="Preview Email"
>
  <case-management-preview-email
    [emailContent]="emailContentValue"
  ></case-management-preview-email>
  <kendo-dialog-actions>
    <div class="justify-content-between">
      <div class="w100">
        <button
          kendoButton
          [primary]="true"
          look="flat"
          (click)="OnEditEmailClicked()"
          aria-label="edit email"
        >
          Edit Email
        </button>
      </div>
      <div class="justify-content-end align-items-center">
        <span class="pr-2">3 attachment(s)</span>
        <button
          kendoButton
          [primary]="true"
          (click)="onSendEmailConfirmationClicked()"
          aria-label="send email"
        >
          Send Email
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>

<!-- Sene Email ConfirmationModal -->
<kendo-dialog
  *ngIf="isShowSendEmailConfirmationPopupClicked"
  (close)="onSendEmailConfirmationDialogClicked('Close')"
  class="app-c-modal app-c-modal-sm app-c-modal-np"
  title="Send email?"
>
  <case-management-send-email-confirmation></case-management-send-email-confirmation>
  <kendo-dialog-actions>
    <div class="justify-content-between">
      <div class="w100">
        <button
          kendoButton
          [primary]="true"
          look="flat"
          (click)="OnEditEmailClicked()"
          aria-label="edit email"
        >
          Edit Email
        </button>
      </div>
      <div class="justify-content-end">
        <button
          kendoButton
          [primary]="true"
          (click)="onSendEmailConfirmationDialogClicked('Print')"
          aria-label="send email confirmation"
        >
          OK
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>

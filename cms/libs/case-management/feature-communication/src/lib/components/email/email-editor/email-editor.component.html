<div class="mb-2 mt-2" *ngIf="showAttachmentUpload">
  <kendo-upload   (select)="handleFileSelected($event)" [ngModel]="uploadedAttachedFile" (remove)="handleFileRemoved($event)"
  #uploadsystemfile [ngModelOptions]="{standalone: true}" [removeUrl]="uploadRemoveUrl" [restrictions]="uploadFileRestrictions.fileRestrictions">
    <ng-template kendoUploadFileInfoTemplate let-files let-state="state">
      <span >
        <span>{{ files[0].name }} </span> 
        <br>
        <span>{{   files[0].size | fileSize }}</span> 
      </span>
    </ng-template>
  </kendo-upload>
  <kendo-formhint >Max file size 25MB</kendo-formhint>
  <kendo-formerror *ngIf="attachedFileValidatorSize">File size is limited to 25 MB. Please select a smaller file. </kendo-formerror>
</div>
<!-- Select file form client attachment -->
<div *ngIf="showClientAttachmentUpload" class="mb-2 mt-2">
  <kendo-floatinglabel  text="Client Documents">
      
    <kendo-multicolumncombobox
      (valueChange)="clientAttachmentChange($event)"
      [data]="clientAllDocumentList$"
      textField="documentName"
      valueField="clientDocumentId"
      autofocusfield
      [popupSettings]="{popupClass: 'case-search-footer combotable_search_list',  appendTo:'component' ,animate: true }"
      [fillMode]="formUiStyle.dropDownFillMode"
      [filterable]="true"
   >
      <kendo-combobox-column >
        <ng-template   kendoMultiColumnComboBoxColumnCellTemplate  let-dataItem  >
          <span  >{{ dataItem.documentName }}</span>
        </ng-template>
      </kendo-combobox-column>
    </kendo-multicolumncombobox>
  </kendo-floatinglabel>
  </div>
<!-- Select file form forms and documents -->
<div *ngIf="showFormsAndDocumentsUpload" class="mb-2 mt-2">
<kendo-floatinglabel  text="Forms & Documents">
    
  <kendo-multicolumncombobox
    (valueChange)="formsAndDocumentChange($event)"
    [data]="formsAndDocumentList$"
    textField="description"
    valueField="documentTemplateId"
    autofocusfield
    [popupSettings]="{popupClass: 'case-search-footer combotable_search_list',  appendTo:'component' ,animate: true }"
    [fillMode]="formUiStyle.dropDownFillMode"
    [filterable]="true"
 >
    <kendo-combobox-column >
      <ng-template   kendoMultiColumnComboBoxColumnCellTemplate  let-dataItem  >
        <span  >{{ dataItem.description }}</span>
      </ng-template>
    </kendo-combobox-column>
  </kendo-multicolumncombobox>
</kendo-floatinglabel>
</div>
<div class="app-c-editor letter-editor-height">
  <!-- Variable dropdown -->
  <button
    kendoButton
    #anchor
    (click)="onToggle()"
    class="text-t-normal editor-variable-button"
    look="outline"
    aria-label="Insert a variable"
    title="Insert a variable"
  >
    Insert a variable
    <span class="material-icons" aria-label="dropdown arrow" aria-hidden="true"
      >arrow_drop_down</span
    >
  </button>
  <kendo-popup
  #popup [anchor]="anchor.element"
    popupClass="content"
    *ngIf="isShowPopupClicked"
  >
    <div class="sms-popup-content">
      <div class="variable-search-block">
        <div class="input-search mat-form-no-b-space">
          <div  class="medium-input-form sms-variable-search_input"  >
            <kendo-textbox aria-label="input a variable"  placeholder="Search" [fillMode]="formUiStyle.inputFillMode" (valueChange)="onSearchChange($event)">   </kendo-textbox>
          </div>
        </div>
        <button
          kendoButton
          class="k-icon-button sms-variable-search_close"
          (click)="onSearchClosed()"
          aria-label="Close"
          title="Close"
        >
          <span
            class="material-icons"
            aria-label="Close"
            aria-hidden="true"
            >close</span
          >
        </button>
      </div>
      <div class="var-list-block">
        <section>
          <h5 *ngIf="typeCount > 0">{{variableName}} Variables</h5>
          <ul
            class="var-list-item"
            aria-label="client variables"
            *ngFor="let item of clientVariables"
          >
            <li (click)="BindVariableToEditor(editor, item.lovCode)" *ngIf="item.parentCode === typeName" aria-label="client variables item">{{ item.lovDesc }}</li>
          </ul>
        </section>
        <section>
          <h5 *ngIf="myCount > 0">My Variables</h5>
          <ul
            class="var-list-item"
            aria-label="my variables"
            *ngFor="let item of clientVariables"
          >
            <li (click)="BindVariableToEditor(editor, item.lovCode)" *ngIf="item.parentCode ==='CASE_WORKER_VARIABLE'" aria-label="my variables item">{{ item.lovDesc }}</li>
          </ul>
        </section>
        <section>
          <h5 *ngIf="otherCount > 0">Other Variables</h5>
          <ul
            class="var-list-item"
            aria-label="other variables"
            *ngFor="let item of clientVariables"
          >
            <li (click)="BindVariableToEditor(editor, item.lovCode)" *ngIf="item.parentCode ==='OTHER_VARIABLE'" aria-label="other variables item">{{ item.lovDesc }}</li>
          </ul>
        </section>
      </div>
    </div>
  </kendo-popup>
  <!-- Editor -->
  <kendo-editor #editor [(value)]="selectedTemplateContent" (valueChange)="editorValueChange($event)">
  <case-management-send-email
  (editorValue)="emailEditorValueEvent($event)"
  [clientCaseEligibilityId]="clientCaseEligibilityId"
  [entityId]="clientId"
  (cerEmailAttachments)="cerEmailAttachmentEvent($event)"
  (contentValidateEvent)="contentValidateHandler($event)"
></case-management-send-email>
    <kendo-toolbar>
      <kendo-toolbar-buttongroup>
        <kendo-toolbar-button
          kendoEditorUndoButton
          aria-label="undo"
        ></kendo-toolbar-button>
        <kendo-toolbar-button
          kendoEditorRedoButton
          aria-label="redo"
        ></kendo-toolbar-button>
        <kendo-toolbar-button
          kendoEditorBoldButton
          aria-label="bold"
        ></kendo-toolbar-button>
        <kendo-toolbar-button
          kendoEditorItalicButton
          aria-label="italic"
        ></kendo-toolbar-button>
        <kendo-toolbar-button
          kendoEditorUnderlineButton
          aria-label="underline"
        ></kendo-toolbar-button>
      </kendo-toolbar-buttongroup>

      <kendo-toolbar-dropdownlist
        kendoEditorFontSize
      ></kendo-toolbar-dropdownlist>

      <kendo-toolbar-buttongroup>
        <kendo-toolbar-button
          kendoEditorAlignLeftButton
          aria-label="align left"
        ></kendo-toolbar-button>
        <kendo-toolbar-button
          kendoEditorAlignCenterButton
          aria-label="align center"
        ></kendo-toolbar-button>
        <kendo-toolbar-button
          kendoEditorAlignRightButton
          aria-label="align right"
        ></kendo-toolbar-button>
        <kendo-toolbar-button
          kendoEditorAlignJustifyButton
          aria-label="align justify"
        ></kendo-toolbar-button>
      </kendo-toolbar-buttongroup>
      <kendo-toolbar-buttongroup>
        <kendo-toolbar-button
          kendoEditorInsertUnorderedListButton
          aria-label="insert unordered list"
        ></kendo-toolbar-button>
        <kendo-toolbar-button
          kendoEditorInsertOrderedListButton
          aria-label="insert ordered list"
        ></kendo-toolbar-button>
        <kendo-toolbar-button
          kendoEditorIndentButton
          aria-label="indent"
        ></kendo-toolbar-button>
        <kendo-toolbar-button
          kendoEditorOutdentButton
          aria-label="outdent"
        ></kendo-toolbar-button>
      </kendo-toolbar-buttongroup>
      <kendo-toolbar-button
        kendoEditorInsertImageButton
        aria-label="insert image"
      ></kendo-toolbar-button>
      <kendo-toolbar-buttongroup *ngIf="templateLoadType !== 'LETTER'">
        <kendo-toolbar-button
          kendoEditorCreateLinkButton
        ></kendo-toolbar-button>
        <kendo-toolbar-button kendoEditorUnlinkButton></kendo-toolbar-button>
       
      </kendo-toolbar-buttongroup>
      <kendo-toolbar-dropdownbutton
      aria-label="attachment"
        icon="attachment"
        [data]="editorUploadOptions"
      >
        <ng-template kendoDropDownButtonItemTemplate let-dataItem>
        <label  [for]="dataItem.id">{{ dataItem.text }}</label>       
        </ng-template>
      </kendo-toolbar-dropdownbutton>
    </kendo-toolbar>
  </kendo-editor>
  <kendo-formerror *ngIf="isContentMissing">
    Content is required.
  </kendo-formerror>
  
  <!-- Attachment Panel -->
  <div class="panelbar-wrapper">
  <kendo-panelbar>
    <kendo-panelbar-item *ngIf="selectedAttachedFile.length > 0" title="{{selectedAttachedFile.length}} attachment(s)">
      <ng-template kendoPanelBarContent>
        <div class="attachment-item-list" kendoTooltip *ngFor="let item of selectedAttachedFile;let index = index">
          <a class="attachment-item_name" (click)="clientAttachmentClick(item)">{{item.name}}</a>
          <span class="attachment-item_size">{{item.size | fileSize}}</span>
          <button
            kendoButton
            class="attachment-item_remove k-icon-button small-i-btn"
            title="Remove Attachment"
            aria-label="Remove Attachment"
          >
            <span
              class="material-icons"
              aria-label="Remove Attachment"
              aria-hidden="true"
              (click)=" removeAddedFile(index)"
              >close</span
            >
          </button>
        </div>
      </ng-template>
    </kendo-panelbar-item>
  </kendo-panelbar>
  </div>
</div>


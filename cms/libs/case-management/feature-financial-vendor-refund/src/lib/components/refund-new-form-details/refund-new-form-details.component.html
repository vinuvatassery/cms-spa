<kendo-dialog-titlebar (close)="closeAddEditRefundFormModalClicked()">
    <section class="app-l-mainTittle">
        <h1 class="maintitle_withicon text-bold">Add New Refund </h1>
    </section>
</kendo-dialog-titlebar>
<section class="k-dialog-body">


    <section class="add_main_popup_screen">


        <div class="add_new_top_section">
            <p class="mb-3"> Search for a client to add insurance, provider, prescription, or tax refunds.</p>

            <div class="flex-row">
                <div class="flex-col flex-col-6">
                    <div class="combotable_search_list new_refund_Search">
                        <span class="material-icons global-search-icon" aria-label="search"
                            aria-hidden="true">search</span>
                        <span *ngIf="isShownSearchLoader"
                            class=" k-icon k-i-loading k-input-loading-icon input-inline-loader"></span>
                        <kendo-multicolumncombobox [data]="clientSearchResult" textField="clientFullName"
                            valueField="clientId" [fillMode]="formUiStyle.dropDownFillMode"
                            placeholder="Search Client Name, ID, or SSN"
                            [popupSettings]="{popupClass: 'combotable_search_list', animate: true }" [filterable]="true"
                            formControlName="itemSelected">
                            <button kendoButton fillMode="clear" icon="image"></button>

                            <kendo-combobox-column>
                                <ng-template kendoMultiColumnComboBoxColumnCellTemplate let-dataItem>
                                    <span>{{ dataItem.clientFullName }}</span>
                                </ng-template>
                            </kendo-combobox-column>
                            <kendo-combobox-column [width]="100">
                                <ng-template kendoMultiColumnComboBoxColumnCellTemplate let-dataItem>
                                    <span class=" text-muted"> <em>ID:</em> {{dataItem.clientId}}</span>
                                </ng-template>
                            </kendo-combobox-column>
                            <kendo-combobox-column [width]="150">
                                <ng-template kendoMultiColumnComboBoxColumnCellTemplate let-dataItem>
                                    <span class="text-muted"><em> SSN:</em> {{ dataItem.ssn }}</span>
                                </ng-template>
                            </kendo-combobox-column>
                            <kendo-combobox-column [width]="125">
                                <ng-template kendoMultiColumnComboBoxColumnCellTemplate let-dataItem>
                                    <span class=" text-muted"> <em>DOB:</em> {{ dataItem.dob}}</span>
                                </ng-template>
                            </kendo-combobox-column>
                        </kendo-multicolumncombobox>
                    </div>
                
                </div>
            </div>
            <div class="flex-row">
                <div class="flex-col flex-col-6">
                    <kendo-floatinglabel text="Refund Type">
                        <kendo-dropdownlist aria-label="Refund Type"   [(ngModel)]="selectedRefundType" [data]="refundType" [fillMode]="formUiStyle.dropDownFillMode">
                        </kendo-dropdownlist>
                    </kendo-floatinglabel>
                </div>
            </div>
            <div class="flex-row" *ngIf="selectedRefundType === 'TPA'">
                <div class="flex-col flex-col-6">
                    <kendo-floatinglabel text="Medical Provider">
                        <kendo-dropdownlist aria-label="Medical Provider"
                            [fillMode]="formUiStyle.dropDownFillMode">
                        </kendo-dropdownlist>
                    </kendo-floatinglabel>
                    <div class="text-right">
                        <a kendoButton look="flat" class="card-link-button" href="#isRecentPremiumsShow">
                            View Recent Premiums
                        </a>
                    </div>
                </div>
               
            </div>
            <div class="flex-row" *ngIf="selectedRefundType === 'INS'">
                <div class="flex-col flex-col-6">
                    <kendo-floatinglabel text="Insurance Carrier and Plan">
                        <kendo-dropdownlist aria-label="Insurance Carrier and Plan"
                            [fillMode]="formUiStyle.dropDownFillMode">
                        </kendo-dropdownlist>
                    </kendo-floatinglabel>
                    <div class="text-right">
                        <a kendoButton look="flat" class="card-link-button" href="#isRecentPremiumsShow">
                            View Recent Premiums
                        </a>
                    </div>
                </div>
               
            </div>
            <div class="flex-row" *ngIf="selectedRefundType === 'RX'">
                <div class="flex-col flex-col-6">
                    <kendo-floatinglabel text="Pharmacy">
                        <kendo-dropdownlist aria-label="Pharmacy"
                            [fillMode]="formUiStyle.dropDownFillMode">
                        </kendo-dropdownlist>
                    </kendo-floatinglabel>
                    <div class="text-right">
                        <a kendoButton look="flat" class="card-link-button" href="#isRecentPremiumsShow">
                            View Recent Premiums
                        </a>
                    </div>
                </div>
               
            </div>
            
        </div>


        <div class="add_new_bottom_section">

            <div class="mt-3" *ngIf="selectedRefundType === 'TPA'">
                <h5>Select claims to refund</h5>
                <div class="add_new_fixed_bottom_grid_section">
                    <cms-vendor-refund-claims-list [claimsListData$]="claimsListData$" [pageSizes]="pageSizes"
                        [sortValue]="sortValue" [sortType]="sortType" [sort]="sort"
                        (loadClaimsListEvent)="loadClaimsListGrid()"></cms-vendor-refund-claims-list>
                </div>
            </div>
            <div class="mt-3" *ngIf="selectedRefundType === 'INS' || selectedRefundType === 'TAX'">
                <h5>Select all premium included in this refund</h5>
                <div class="add_new_fixed_bottom_grid_section">
                    <cms-vendor-refund-insurance-premium-list [premiumListData$]="premiumsListData$" [pageSizes]="pageSizes"
                        [sortValue]="sortValuePremiums" [sortType]="sortType" [sort]="sortPremiums"
                        (loadPremiumsListEvent)="loadPremiumsListGrid()"></cms-vendor-refund-insurance-premium-list>
                </div>
            </div>
            <div class="mt-3" *ngIf="selectedRefundType === 'RX'">
                <h5>Select all claims included in the refund</h5>
                <div class="add_new_fixed_bottom_grid_section">
                    <cms-vendor-refund-claims-list [claimsListData$]="claimsListData$" [pageSizes]="pageSizes"
                        [sortValue]="sortValue" [sortType]="sortType" [sort]="sort"
                        (loadClaimsListEvent)="loadClaimsListGrid()"></cms-vendor-refund-claims-list>
                </div>
            </div>

            <div class="flex-row">
                <div class="flex-col ">
                    <div class=" text-center mb-1">
                        <button kendoButton [primary]="true" look="flat" aria-label="Select different Payments"
                            class="button-lg"> Select different Payments
                        </button>
                    </div>
                </div>
            </div>
            <div class="flex-row">
                <div class="flex-col flex-col-3">
                    <span class="app-checkboxwidtext-wrapper mt-4">
                        <input kendoCheckBox type="checkbox" id="spots-payment" name="spots-payment"
                            aria-labelledby="spots-payment" />
                        <label class="k-checkbox-label" for="spots-payment">This is a SPOTS payment</label>
                    </span>
                </div>
            </div>
            <div class="flex-row">
                <div class="flex-col" *ngIf="selectedRefundType === 'TPA'">
                    <table class=" info-table-custom left_right_align mb-3">
                        <caption hidden> Refund Information</caption>
                        <tr hidden>
                            <th scope="col">Fields</th>
                            <th scope="col">Details</th>
                          
                        </tr>
                        <tbody>
                            <tr>
                                <td>Invoice ID</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>Original Warrant #</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>PCA Code</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>Grant #</td>
                                <td>XXXXXXXXXX</td>
                            </tr> 
                        </tbody>
                    </table>
                </div>
                <div class="flex-col" *ngIf="selectedRefundType === 'INS'">
                    <table class=" info-table-custom left_right_align mb-3">
                        <caption hidden> Refund Information</caption>
                        <tr hidden>
                            <th scope="col">Fields</th>
                            <th scope="col">Details</th>
                          
                        </tr>
                        <tbody>
                            <tr>
                                <td>Index Code</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>PCA Code</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>Grant #</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>Policy ID</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>Group ID</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>Payment ID</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="flex-col" *ngIf="selectedRefundType === 'TAX'">
                    <table class=" info-table-custom left_right_align mb-3">
                        <caption hidden> Refund Information</caption>
                        <tr hidden>
                            <th scope="col">Fields</th>
                            <th scope="col">Details</th>
                          
                        </tr>
                        <tbody>
                            <tr>
                                <td>Index Code</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>PCA Code</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>Grant #</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            
                        </tbody>
                    </table>
                </div>
                <div class="flex-col" *ngIf="selectedRefundType === 'RX'">
                    <table class=" info-table-custom left_right_align mb-3">
                        <caption hidden> Refund Information</caption>
                        <tr hidden>
                            <th scope="col">Fields</th>
                            <th scope="col">Details</th>
                          
                        </tr>
                        <tbody>
                            <tr>
                                <td>Index Code</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>PCA Code</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>Grant #</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>Original Warrant #</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            <tr>
                                <td>Original Payment Method</td>
                                <td>XXXXXXXXXX</td>
                            </tr>
                            
                        </tbody>
                    </table>
                </div>
                <!-- <div class="flex-col ">

                    <div class="flex-row column-labels">
                        <div class="flex-col flex-col-2">
                            <label><strong>Index Code</strong></label>
                            <p> XXXXXXXXXX</p>
                        </div>
                        <div class="flex-col flex-col-2">
                            <label><strong>PCA Code</strong></label>
                            <p>XXXXXXXXXX</p>
                        </div>

                        <div class="flex-col flex-col-2">
                            <label><strong>Grant #</strong></label>
                            <p> XXXXXXXXXX </p>
                        </div>

                        <div class="flex-col flex-col-2">
                            <label><strong>Policy ID</strong></label>
                            <p>XXXXXXXXXX </p>
                        </div>

                        <div class="flex-col flex-col-2">
                            <label><strong>Group ID</strong></label>
                            <p>XXXXXXXXXX</p>
                        </div>
                        <div class="flex-col flex-col-2">
                            <label><strong>Payment ID</strong></label>
                            <p>XXXXXXXXXX</p>
                        </div>

                    </div>
                </div> -->
            </div>
            <div class="flex-row">
                <div class="flex-col  add_grid_section">

                    <kendo-grid [resizable]="true" [groupable]="false" [reorderable]="true" [resizable]="true"
                        [columnMenu]="{ filter: true }" [data]="selectedPremium">

                        <kendo-grid-column field="coverageDates" title="Coverage Dates" [width]="160">
                        </kendo-grid-column>
                        <kendo-grid-column field="warrant" title="Original Warrant #" [width]="160">
                        </kendo-grid-column>
                        <kendo-grid-column field="amountPaid" title="Original Amount Paid" [width]="180">
                        </kendo-grid-column>
                        <kendo-grid-column field="pmtMethod" title="Pmt. Method" [width]="140"> </kendo-grid-column>
                        <kendo-grid-column field="pmtStatus" title="Pmt. Status" [width]="210"> </kendo-grid-column>
                        <kendo-grid-column field="PCA" title="PCA" [width]="120"> </kendo-grid-column>
                        <kendo-grid-column field="mailCode" title="Mail Code" [width]="120"> </kendo-grid-column>
                        <kendo-grid-column field="refundAmount" title="Refund Amount" [width]="150">
                        </kendo-grid-column>
                        <kendo-grid-column field="by" title="By" [width]="75" class="text-center">
                            <ng-template kendoGridCellTemplate let-dataItem>
                                <button kendoButton [primary]="true" class="avatar-sm-btn c-default" kendoPopoverAnchor
                                    [popover]="onUserProfileDetailsHovered" showOn="hover"
                                    [attr.aria-label]="dataItem.creatorId">
                                    <common-user-photo-icon [userId]="dataItem.creatorId"></common-user-photo-icon>
                                </button>
                                <kendo-popover #onUserProfileDetailsHovered width="330" position="left">
                                    <ng-template kendoPopoverBodyTemplate>
                                        <common-user-profile-card
                                            [userId]="dataItem.creatorId"></common-user-profile-card>
                                    </ng-template>
                                </kendo-popover>
                            </ng-template>
                        </kendo-grid-column>
                    </kendo-grid>

                </div>
            </div>
            <div class="flex-row">
                <div class="flex-col ">
                  
                        <div class="flex-row">
                            <div class="flex-col flex-col-3">
                                <kendo-floatinglabel text=" VP">
                                    <kendo-textbox aria-label="VP" [disabled]="true"
                                        [fillMode]="formUiStyle.inputFillMode">
                                    </kendo-textbox>
                                </kendo-floatinglabel>
                            </div>
                            <div class="flex-col flex-col-3">
                                <kendo-floatinglabel text="VP Suffix (optional)">
                                    <kendo-textbox aria-label="VP Suffix (optional)" [disabled]="true"
                                        [fillMode]="formUiStyle.inputFillMode">
                                    </kendo-textbox>
                                </kendo-floatinglabel>
                            </div>
                            <div class="flex-col flex-col-3">
                                <kendo-floatinglabel text="Refund Warrant #">
                                    <kendo-textbox aria-label="Refund Warrant #" [fillMode]="formUiStyle.inputFillMode">
                                    </kendo-textbox>
                                </kendo-floatinglabel>
                            </div>
                            <div class="flex-col flex-col-3">
                                <kendo-floatinglabel text="Deposit Date">
                                    <kendo-datepicker [fillMode]="formUiStyle.dateInputFillMode"
                                        aria-label="Deposit Date" format="MM/dd/yyyy" formatPlaceholder="formatPattern">
                                    </kendo-datepicker>
                                </kendo-floatinglabel>
                            </div>
                            <div class="flex-col flex-col-6">
                                <kendo-floatinglabel text="Refund Note (optional)">
                                    <kendo-textbox aria-label="Refund Note (optional)"
                                        [fillMode]="formUiStyle.inputFillMode">
                                    </kendo-textbox>
                                </kendo-floatinglabel>
                            </div>
                        </div>
                     
                </div>
            </div>
            <div class="mt-3">
                <h5>Select all premiums included in this refund:</h5>
                <div id="isRecentPremiumsShow">
                    <cms-vendor-refund-claims-list [claimsListData$]="claimsListData$" [pageSizes]="pageSizes"
                        [sortValue]="sortValue" [sortType]="sortType" [sort]="sort"
                        (loadClaimsListEvent)="loadClaimsListGrid()"></cms-vendor-refund-claims-list>
                </div>
            </div>

            <div class="mt-3">
                <h5>Insurance Premium Payments for FName LName</h5>
                <div class="add_new_fixed_bottom_grid_section">
                    <cms-vendor-refund-claims-list [claimsListData$]="claimsListData$" [pageSizes]="pageSizes"
                        [sortValue]="sortValue" [sortType]="sortType" [sort]="sort"
                        (loadClaimsListEvent)="loadClaimsListGrid()"></cms-vendor-refund-claims-list>
                </div>
            </div>
        </div>
    </section>
</section>


<kendo-dialog-actions>
    <div class="justify-content-between">
        <div class="justify-content-end align-items-center">
            <span class="ml-2">0 payment(s) selected</span>

            <button kendoButton [primary]="true" look="outline" class="ml-2" aria-label="Cancel"> Cancel </button>
            <button kendoButton [primary]="true" aria-label="Add" class=""> Add </button>
            <button kendoButton [primary]="true" aria-label="Confirm Selections" class=""> Confirm Selections
            </button>

        </div>
    </div>
</kendo-dialog-actions>
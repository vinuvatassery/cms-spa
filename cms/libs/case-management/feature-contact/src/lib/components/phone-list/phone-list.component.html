<div class="flex-row mt-2">
  <div class="flex-col flex-space-bw align-items-center">
    <h5 class="title-md mb-0 text-capital">Phone Numbers</h5>
    <span>
      <input
        type="checkbox"
        kendoCheckBox
        aria-labelledby="showHistorical"
        id="showHistorical"
      />
      <label class="k-checkbox-label" for="showHistorical"
        >Show historical</label
      >
    </span>
  </div>
  <div class="flex-col mt-1">
    <div class="app-c-table">
      <kendo-grid [data]="phoneNumbers$ | async">
        <kendo-grid-column field="type" title="Type" [width]="80">
          <ng-template kendoGridCellTemplate let-dataItem>
            <div class="d-flex align-items center pos-rel" kendoTooltip>
              <span class="preferred-phoneNo" title="Preferred Contact">
                <span
                  class="material-icons icon-size-md"
                  aria-label="preferred contact"
                  aria-hidden="true"
                  >star</span
                >
              </span>
              <span class="pl-3">{{ dataItem.type }}</span>
            </div>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          field="phoneNumber"
          title="Phone Number"
          [width]="150"
        >
        </kendo-grid-column>
        <kendo-grid-column
          field="detailedMessages"
          title="Detailed Messages OK?"
          [width]="150"
        >
        </kendo-grid-column>
        <kendo-grid-column field="smsText" title="SMS Text OK?" [width]="100">
        </kendo-grid-column>
        <kendo-grid-column field="note" title="Note" [width]="200">
        </kendo-grid-column>
        <kendo-grid-column
          field="effectiveDate"
          title="Effective Date"
          [width]="100"
        >
        </kendo-grid-column>
        <kendo-grid-column field="by" title="By" [width]="50">
          <ng-template kendoGridCellTemplate let-dataItem>
            <button
              kendoButton
              [primary]="true"
              class="avatar-sm-btn c-default"
              kendoPopoverAnchor
              [popover]="onUserProfileDetailsHovered"
              showOn="hover"
              aria-label="profile avathar"
            >
              <div mat-card-avatar="" class="app-c-avatar avatar-sm">
                <!-- <img
                  src="../assets/images/avatar-1.png"
                  alt="Profile Avatar"
                  class="profile-avatar"
                  hidden
                /> -->
                <span class="profile-text-avatar">AK</span>
              </div>
            </button>
            <kendo-popover
              #onUserProfileDetailsHovered
              width="330"
              position="left"
            >
              <ng-template kendoPopoverBodyTemplate>
                <common-user-profile-card></common-user-profile-card>
              </ng-template>
            </kendo-popover>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          field="Option"
          title="Option"
          [width]="75"
          class="text-center"
        >
          <ng-template kendoGridCellTemplate let-dataItem>
            <kendo-dropdownbutton
              [data]="gridOption"
              icon="more-vertical"
              class="TableActionPopup app-dropdown-action"
              buttonClass="k-icon-button"
              aria-label="more actions"
              [popupSettings]="{ popupClass: popupClassAction, animate: true }"
            >
            
              <ng-template class="app-dropdown-action-list" kendoDropDownButtonItemTemplate let-dataItem>
                <button kendoButton  look="flat" [attr.aria-label]="dataItem.text" [class]="dataItem.buttonType" aria-hidden="false" (click)="dataItem.click">
                  <span class="material-icons" [attr.aria-label]="dataItem.text" >{{dataItem.icon}}</span>
                  <label>   {{ dataItem.text }} </label>
              </button>
                <!-- <button
                  kendoButton
                  icon="edit"
                  look="flat"
                  class="btn-h-primary"
                  (click)="onPhoneNumberDetailClicked(true)"
                  aria-label="edit phone"
                >
                  Edit Phone
                </button>
                <button
                  kendoButton
                  icon="star"
                  look="flat"
                  class="btn-h-warn"
                  aria-label="make preferred"
                >
                  Make Preferred
                </button>
                <button
                  kendoButton
                  look="flat"
                  class="btn-h-primary"
                  (click)="onDeactivatePhoneNumberClicked()"
                  aria-label="deactivate phone number"
                >
                  <span
                    class="material-icons"
                    aria-label="deactivate phone number"
                    aria-hidden="true"
                  >
                    block
                  </span>
                  Deactivate Phone
                </button>
                <button
                  kendoButton
                  icon="delete"
                  look="flat"
                  class="btn-h-danger"
                  aria-label="delete phone number"
                >
                  Delete Phone
                </button> -->
              </ng-template>
            </kendo-dropdownbutton>
          </ng-template>
        </kendo-grid-column>
      </kendo-grid>
    </div>
  </div>
  <div class="flex-col mt-1">
    <button
      kendoButton
      [primary]="true"
      icon="add"
      (click)="onPhoneNumberDetailClicked(false)"
      aria-label="add phone number"
    >
      Phone Number
    </button>
  </div>
</div>

<!-- Address Detail Popup-->
<kendo-dialog
  *ngIf="isPhoneNumberDetailPopup"
  (close)="onPhoneNumberDetailClosed()"
  class="app-c-modal app-c-modal-sm app-c-modal-np"
>
  <kendo-dialog-titlebar>{{
    isEditPhoneNumber ? 'Edit Phone Number' : 'Add Phone Number'
  }}</kendo-dialog-titlebar>
  <case-management-phone-detail
    [isEditValue]="isEditPhoneNumber"
  ></case-management-phone-detail>
</kendo-dialog>

<!-- Address Deactivate Popup-->
<kendo-dialog
  *ngIf="isDeactivatePhoneNumberPopup"
  (close)="onDeactivatePhoneNumberClosed()"
  class="app-c-modal app-c-modal-sm app-c-modal-np"
  title="Deactivate phone number?"
>
  <case-management-deactivate-phone-confirmation></case-management-deactivate-phone-confirmation>
</kendo-dialog>

<div class="client-data-block" [ngClass]="isCerForm ? 'CerForm-contact-screen' : '' ">
  <h2 hidden>Application</h2>
  <h3>{{   isCerForm ? 'Mailing Address' : 'Contact Info' }}  </h3>
  <h4 hidden>Contact info</h4>
  <section>
    <form [formGroup]="contactInfoForm" autocomplete="off" >
      <!-- Contact Email Details-->
      <div class="block-section block-section-two cer-mb-3" formGroupName="mailingAddress">
        <div class="flex-row" *ngIf="!isCerForm">
          <div class="flex-col mat-split-list">
            <h5 class="text-capital">Mailing Address</h5>
          </div>
        </div>
        <div class="flex-row" *ngIf="isCerForm">
        <div class="flex-col">
          <kendo-formfield>
          <fieldset class="k-form-fieldset">
            <legend class="k-form-legend"><h5>Has their mailing address changed?</h5></legend>
          <div class="component-list-h comp-list-horizontal">
            <span class="app-radiobtnwidtext-wrapper">

              <input type="radio" kendoRadioButton   aria-labelledby="mailingaddresschangedYes"
                id="mailingaddresschangedYes"
                class="form-control"
                value="Y"
                formControlName="mailingAddressChangedFlag"
                (change)="adjustCerChangeFlagValues('mailingAddress_mailingAddressChangedFlag', 'Y')"
              />
              <kendo-label
                class="k-radio-label"
                for="mailingaddresschangedYes"
                text="Yes"
              ></kendo-label>
            </span>
            <span class="app-radiobtnwidtext-wrapper">
              <input
                type="radio"
                kendoRadioButton
                aria-labelledby="mailingaddresschangedNo"
                id="mailingaddresschangedNo"
                value="N"
                formControlName="mailingAddressChangedFlag"
                (change)="adjustCerChangeFlagValues('mailingAddress_mailingAddressChangedFlag', 'N')"
              />
              <kendo-label
                class="k-radio-label"
                for="mailingaddresschangedNo"
                text="No"
              ></kendo-label>
            </span>
          </div>
          </fieldset>
          <kendo-formerror *ngIf="mailingAddress?.mailingAddressChangedFlag?.errors?.required">
            Has their mailing address changed is required
          </kendo-formerror>
        </kendo-formfield>
          <h5 *ngIf="mailingAddress?.mailingAddressChangedFlag?.value === 'Y'">Enter their new mailing address:</h5>
        </div>
        </div>
        <div *ngIf="(isCerForm && mailingAddress?.mailingAddressChangedFlag?.value === 'Y') || !isCerForm">
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Address Line 1">
              <kendo-textbox
              textFieldautofocus
              aria-label="Mailing Address Line 1"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="100"
              formControlName="address1"
              (blur)="validateMailingAddress()"
              placeholder="Address Line 1"
              autocomplete="off"
              > </kendo-textbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm">
              <b>Old Address line 1:</b> {{ oldMailingAddress?.address1 }}
              <button aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('mailingAddress.address1',oldMailingAddress?.address1??'')">Use Old  </button></p>
            <kendo-formerror *ngIf="mailingAddress?.address1?.errors?.required">
              Mailing Address is required
            </kendo-formerror>
            <kendo-formerror *ngIf="mailingAddress?.address1?.errors?.pattern">
              Special characters are not allowed
            </kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Address Line 2 (Optional)">
              <kendo-textbox
              aria-label="Mailing Address line 2 (Optional)"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="100"
              formControlName="address2"
              autocomplete="off"
              (blur)="validateMailingAddress()"
              placeholder="Address Line 2"
              > </kendo-textbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Address line 2:</b> {{ oldMailingAddress?.address2 }} <button aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('mailingAddress.address2',oldMailingAddress?.address2??'')">Use Old  </button></p>
            <kendo-formerror *ngIf="mailingAddress?.address2?.errors?.pattern">
              Special characters are not allowed
            </kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="City">
              <kendo-textbox
              aria-label="Mailing city"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="20"
              formControlName="city"
              autocomplete="off"
              (blur)="validateMailingAddress()"  placeholder="City"
              > </kendo-textbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old City:</b> {{  oldMailingAddress?.city }} <button aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('mailingAddress.city',oldMailingAddress?.city??'')">Use Old  </button></p>

            <kendo-formerror *ngIf="mailingAddress?.city?.errors?.required">
              Mailing City is required
            </kendo-formerror>
            <kendo-formerror *ngIf="mailingAddress?.city?.errors?.pattern">
              Special characters are not allowed
            </kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">

            <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="State">
              <kendo-dropdownlist
              aria-label="Mailing State"
              [fillMode]="formUiStyle.dropDownFillMode"
              formControlName="state"
              [data]="ddlStates$ | async"
              textField="stateName"
              valueField="stateCode"
              [valuePrimitive]="true"
              (blur)="validateMailingAddress()"  placeholder="State"
              >
              </kendo-dropdownlist>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old State:</b> {{  oldMailingAddress?.state }} <button aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('mailingAddress.state',oldMailingAddress?.state??'')">Use Old  </button></p>
            <kendo-formerror>Mailing State is required</kendo-formerror>
          </kendo-formfield>
          </div>
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Zip" class="">
              <kendo-textbox
              aria-label="Mailing Zip"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="10"
              formControlName="zip"
              autocomplete="off"
              (blur)="validateMailingAddress()"  placeholder="Zip"
              > </kendo-textbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Zip:</b> {{ oldMailingAddress?.zip }} <button aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('mailingAddress.zip',oldMailingAddress?.zip??'')">Use Old  </button></p>

            <kendo-formerror *ngIf="mailingAddress?.zip?.errors?.required">
              Mailing Zip is required
            </kendo-formerror>
            <kendo-formerror *ngIf="mailingAddress?.zip?.errors?.pattern">
              Special characters are not allowed
            </kendo-formerror>
          </kendo-formfield>
          </div>
          </div>
        </div>
          <div class="flex-col flex-col-4 mt-04" *ngIf="showMailAddressValidationLoader$ | async">
            <span class="app-c-badge  mt-3" aria-label="Validating address">
              <span class="k-icon k-i-loading k-input-loading-icon input-inline-loader"  ></span>
              <span> Validating address...</span>
            </span>
          </div>
        </div>
        <div class="flex-row" *ngIf="mailingAddressIsNotValid">
          <div class="flex-col flex-col-6">
          <span class="app-c-badge badge-warn-light mt-3" aria-label="Info USPS can't validate this address">
            <span class="material-icons" aria-label="info USPS can't validate this address" aria-hidden="true">
              info
            </span>
                USPS can't validate this address.
          </span>
        </div>
        </div>
      </div>
      </div>
      <h3 *ngIf="isCerForm"> Home Address   </h3>
      <div class="block-section block-section-two cer-mb-3"  formGroupName="homeAddress">
        <div class="flex-row" *ngIf="isCerForm">
          <div class="flex-col">
            <kendo-formfield>
            <fieldset class="k-form-fieldset">
              <legend class="k-form-legend"><h5>Has their home address changed?</h5></legend>

            <div class="component-list-h comp-list-horizontal">
              <span class="app-radiobtnwidtext-wrapper">
                <input type="radio" kendoRadioButton   aria-labelledby="homeaddresschangedYes"
                  id="homeaddresschangedYes"
                  class="form-control"
                  value="Y"
                  formControlName="homeAddressChangedFlag"
                  (change)="adjustCerChangeFlagValues('homeAddress_homeAddressChangedFlag', 'Y')"
                />
                <kendo-label
                  class="k-radio-label"
                  for="homeaddresschangedYes"
                  text="Yes"
                ></kendo-label>
              </span>
              <span class="app-radiobtnwidtext-wrapper">
                <input
                  type="radio"
                  kendoRadioButton
                  aria-labelledby="homeaddresschangedNo"
                  id="homeaddresschangedNo"
                  value="N"
                  formControlName="homeAddressChangedFlag"
                  (change)="adjustCerChangeFlagValues('homeAddress_homeAddressChangedFlag', 'N')"
                />
                <kendo-label
                  class="k-radio-label"
                  for="homeaddresschangedNo"
                  text="No"
                ></kendo-label>
              </span>
            </div>
            </fieldset>
            <kendo-formerror *ngIf="homeAddress?.homeAddressChangedFlag?.errors?.required">
              Has their home address changed is required
            </kendo-formerror>
          </kendo-formfield>
            <h5 *ngIf="homeAddress?.homeAddressChangedFlag?.value === 'Y'">Enter their new home address:</h5>
          </div>
          </div>
      <div *ngIf="(isCerForm && homeAddress?.homeAddressChangedFlag?.value === 'Y') || !isCerForm">
        <div class="flex-row">
          <div class="flex-col flex-col-6 mat-split-list mt-2 justify-content-between">
            <h5 class="text-capital" *ngIf="!isCerForm">Home Address</h5>
            <kendo-formfield>
            <span class="app-checkboxwidtext-wrapper">
              <input
              type="checkbox"
              id="sameAsMailingAddressFlag"
              kendoCheckBox
              name="sameAsMailingAddressFlag"
              aria-labelledby="sameAsMailingAddressFlag"
              formControlName="sameAsMailingAddressFlag"
               />
              <label class="k-checkbox-label" for="sameAsMailingAddressFlag">Same as mailing</label>

            </span>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Address Line 1">
              <kendo-textbox
              aria-label="Home Address line 1"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="100"
              formControlName="address1"
              autocomplete="off"
              (blur)="validateHomeAddress()" placeholder="Address Line 1"
              > </kendo-textbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Address line 1:</b> {{  oldHomeAddress?.address1 }} <button *ngIf="!(homeAddress?.sameAsMailingAddressFlag?.value ?? false) && !(homeAddress?.homelessFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('homeAddress.address1',oldHomeAddress?.address1??'')">Use Old  </button></p>

            <kendo-formerror *ngIf="homeAddress?.address1?.errors?.required">
              Home Address is required
            </kendo-formerror>
            <kendo-formerror *ngIf="homeAddress?.address1?.errors?.pattern">
              Special characters are not allowed
            </kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Address Line 2 (Optional)">
              <kendo-textbox
              aria-label="Home Address line 2 (Optional)"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="100"
              formControlName="address2"
              autocomplete="off"
              (blur)="validateHomeAddress()"  placeholder="Address Line 2"
              > </kendo-textbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Address line 2:</b> {{  oldHomeAddress?.address2 }} <button *ngIf="!(homeAddress?.sameAsMailingAddressFlag?.value ?? false) && !(homeAddress?.homelessFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('homeAddress.address2',oldHomeAddress?.address2??'')">Use Old  </button></p>
            <kendo-formerror *ngIf="homeAddress?.address2?.errors?.required">
              Address Line 2 is required
            </kendo-formerror>
            <kendo-formerror *ngIf="homeAddress?.address2?.errors?.pattern">
              Special characters are not allowed
            </kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="City">
              <kendo-textbox
              aria-label="Home City"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="20"
              formControlName="city"
              autocomplete="off"
              (blur)="validateHomeAddress()"  placeholder="City"
              > </kendo-textbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old City:</b> {{  oldHomeAddress?.city }} <button *ngIf="!(homeAddress?.sameAsMailingAddressFlag?.value ?? false) || (homeAddress?.homelessFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('homeAddress.city',oldHomeAddress?.city??'')">Use Old  </button></p>

            <kendo-formerror *ngIf="homeAddress?.city?.errors?.required">
              Home City is required
            </kendo-formerror>
            <kendo-formerror *ngIf="homeAddress?.city?.errors?.pattern">
              Special characters are not allowed
            </kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">

            <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="State" >
              <kendo-dropdownlist
              aria-label="Home State"
              [disabled]="true"
              [fillMode]="formUiStyle.dropDownFillMode"
              [data]="ddlStates$ | async"
              formControlName="state"
              textField="stateName"
              valueField="stateCode"

              [valuePrimitive]="true"
              (valueChange)="onStateChange($event)"
              (blur)="validateHomeAddress()"  placeholder="State"
                >
              </kendo-dropdownlist>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old State:</b> {{ oldHomeAddress?.state }} <button *ngIf="(homeAddress?.sameAsMailingAddressFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button"  (click)="useOldOnClick('homeAddress.state',oldHomeAddress?.state??'')">Use Old  </button></p>

            <kendo-formerror *ngIf="homeAddress?.state?.errors?.required">
              Home State is required
            </kendo-formerror>
          </kendo-formfield>
          <kendo-formerror *ngIf="!(isHomeAddressStateOregon$ | async)">
            Home address must be in Oregon
          </kendo-formerror>
          </div>
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Zip">
              <kendo-textbox
              aria-label="Home Zip optional"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="10"
              formControlName="zip"
              autocomplete="off"
              (blur)="validateHomeAddress()"  placeholder="Zip"
              > </kendo-textbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Zip:</b> {{ oldHomeAddress?.zip }} <button *ngIf="!(homeAddress?.sameAsMailingAddressFlag?.value ?? false) && !(homeAddress?.homelessFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('homeAddress.zip',oldHomeAddress?.zip??'')">Use Old  </button></p>

            <kendo-formerror *ngIf="homeAddress?.zip?.errors?.required">
              Home Zip is required
            </kendo-formerror>
            <kendo-formerror *ngIf="homeAddress?.zip?.errors?.pattern">
              Special characters are not allowed
            </kendo-formerror>
          </kendo-formfield>
          </div>
          </div>
          </div>
          <div class="flex-col flex-col-4 mt-04" *ngIf="showHomeAddressValidationLoader$ | async">
            <span class="app-c-badge  mt-3">
              <span class="k-icon k-i-loading k-input-loading-icon input-inline-loader"  ></span>
              <span> Validating address...</span>
            </span>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="County" class="inline-search-loader">
              <span *ngIf="showCountyLoader | async" class=" k-icon k-i-loading k-input-loading-icon input-inline-loader"  ></span>
              <kendo-dropdownlist
              aria-label="Home County"
              [fillMode]="formUiStyle.dropDownFillMode"
              formControlName="county"
              [data]="ddlCountries$ | async"
              textField="countyName"
              valueField="countyCode"
              [valuePrimitive]="true"  placeholder="Country"
              >
              </kendo-dropdownlist>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old County:</b> {{ oldHomeAddress?.county }} <button aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('homeAddress.county',oldHomeAddress?.county??'')">Use Old  </button></p>

            <kendo-formerror>Home County is required</kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row" *ngIf="homeAddressIsNotValid">
          <div class="flex-col flex-col-6">
          <span class="app-c-badge badge-warn-light mt-3" aria-label="Info USPS can't validate this address">
            <span class="material-icons" aria-label="Info USPS can't validate this address" aria-hidden="true">
              info
            </span>
                USPS can't validate this address.
          </span>
        </div>
        </div>
        <div class="flex-row">
          <div class="flex-col p-2">
            <kendo-formfield>
            <span class="app-checkboxwidtext-wrapper">
              <input
              class="adjust-attr"
              type="checkbox"
              id="homeAddress_homelessFlag"
              name="homeAddress_homelessFlag"
              kendoCheckBox
              aria-labelledby="homeAddress_homelessFlag"
              formControlName="homelessFlag"
               />
              <label class="k-checkbox-label" for="homeAddress_homelessFlag">Unhoused</label>
            </span>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row mt-2">
          <div class="flex-col mat-split-list mt-2">
            <h5 class="text-capital">Proof of Home Address</h5>
            </div>
            <div class="flex-col mt-1">
            <kendo-formfield>
            <span class="app-checkboxwidtext-wrapper">
              <input
              class="adjust-attr"
              type="checkbox"
              id="noHomeAddressProofFlag"
              kendoCheckBox
              aria-labelledby="noHomeAddressProofFlag"
              name="homeAddress_proofFlag"
              formControlName="noHomeAddressProofFlag"
                />
              <label class="k-checkbox-label" for="noHomeAddressProofFlag">No proof of home address or residency</label>
            </span>
          </kendo-formfield>

          </div>
        </div>
        <div class="flex-row mt-2">
          <div class="flex-col flex-col-10">
          <common-document-upload
          [fieldName]="'Proof of Home Address'"
          [typeCode]="'HOME_ADDRESS_PROOF'"
          [isDisabled]="isNoProofOfHomeChecked"
          [file]="homeAddressProofFile"
          [isFileViewable]="true"
          (handleFileSelectEvent)="handleFileSelected($event)"
          (handleFileRemoveEvent)="handleFileRemoved($event)"
          (handleTypeCodeEvent)="handleTypeCodeEvent($event)"
          [isDownloadShow]="this.contactInfoForm.value.noHomeAddressProofFlag"
          >
          </common-document-upload>
          <kendo-formerror *ngIf="showAddressProofRequiredValidation"> Proof of Home Address is required
          </kendo-formerror>
          <kendo-formerror *ngIf="showAddressProofSizeValidation">File size is limited to 25 MB. Please select a smaller file. </kendo-formerror>
          </div>
        </div>
        </div>
        <fieldset class="k-form-fieldset" *ngIf="!isCerForm" role="group" aria-labelledby="stablehousing">
        <div class="flex-row mt-2">
          <div class="flex-col mat-split-list mt-2">
            <legend class="k-form-legend"> <h5 class="text-capital" id="stablehousing">How stable is your housing?</h5></legend>
          </div>
        </div>
          <div class="flex-row ml-1">
            <kendo-formfield>
              <span class="app-radiobtnwidtext-wrapper">
                <input
                  type="radio"
                  kendoRadioButton
                  name="housingStabilityCode"
                  id="StableOrPermanent"
                  class="form-control"
                  aria-labelledby="StableOrPermanent"
                  formControlName="housingStabilityCode"
                  value="STABLE_PERMANENT"
                />
                <kendo-label   class="k-radio-label"   text="Stable/Permanent"  for="StableOrPermanent"  > &nbsp;</kendo-label>
              </span>
              <span class="app-radiobtnwidtext-wrapper">
                <input
                  type="radio"
                  kendoRadioButton
                  name="housingStabilityCode"
                  id="temporary"
                  aria-labelledby="temporary"
                  class="form-control"
                  formControlName="housingStabilityCode"
                  value="TEMP"
                />
                <kendo-label
                  class="k-radio-label"
                  text="Temporary"
                  for="temporary"
                ></kendo-label>
              </span>
              <span class="app-radiobtnwidtext-wrapper">
                <input
                  type="radio"
                  kendoRadioButton
                  name="housingStabilityCode"
                  aria-labelledby="unstable"
                  id="unstable"
                  class="form-control"
                  formControlName="housingStabilityCode"
                  value="UNSTABLE"
                />
                <kendo-label
                  class="k-radio-label"
                  text="Unstable"
                  for="unstable"
                ></kendo-label>
              </span>
              <kendo-formerror>How stable is your housing is required</kendo-formerror>
          </kendo-formfield>
        </div>
        </fieldset>
      </div>
      <!-- Contact Phone Details-->
      <h3 *ngIf="isCerForm">Phone & Contact Information </h3>
      <div class="block-section block-section-two" formGroupName="homePhone">
        <h5 class="text-capital mt-3 pt-2 mb-0" *ngIf="!isCerForm">   Phone & Email   </h5>
        <div class="flex-row" *ngIf="isCerForm">
          <div class="flex-col">
          <kendo-formfield>
            <fieldset class="k-form-fieldset">
              <legend class="k-form-legend"><h5>Have their phone numbers changed?</h5></legend>

            <div class="component-list-h comp-list-horizontal">
              <span class="app-radiobtnwidtext-wrapper">
                <input type="radio" kendoRadioButton   aria-labelledby="phonenumberchangedYes"
                  id="phonenumberchangedYes"
                  class="form-control"
                  value="Y"
                  formControlName="phoneNumberChangedFlag"
                  (change)="adjustCerChangeFlagValues('homePhone_phoneNumberChangedFlag', 'Y')"
                />
                <kendo-label
                  class="k-radio-label"
                  for="phonenumberchangedYes"
                  text="Yes"
                ></kendo-label>
              </span>
              <span class="app-radiobtnwidtext-wrapper">
                <input
                  type="radio"
                  kendoRadioButton
                  aria-labelledby="phonenumberchangedNo"
                  id="phonenumberchangedNo"
                  value="N"
                  formControlName="phoneNumberChangedFlag"
                  (change)="adjustCerChangeFlagValues('homePhone_phoneNumberChangedFlag', 'N')"
                />
                <kendo-label
                  class="k-radio-label"
                  for="phonenumberchangedNo"
                  text="No"
                ></kendo-label>
              </span>
            </div>
            </fieldset>
            <kendo-formerror *ngIf="homePhone?.phoneNumberChangedFlag?.errors?.required">
              Has their phone numbers changed is required
            </kendo-formerror>
          </kendo-formfield>
            <h5 *ngIf="homePhone?.phoneNumberChangedFlag?.value === 'Y'">Enter their new phone numbers:</h5>
          </div>
          </div>
          <div *ngIf="(isCerForm && homePhone?.phoneNumberChangedFlag?.value === 'Y') || !isCerForm">
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Home Phone">
              <kendo-maskedtextbox
              aria-label="home phone"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="10"
              [maskOnFocus]="true"
              formControlName="phoneNbr"
              mask="(999) 000-0000"
              formatPlaceholder="formatPattern"
              placeholder=" "
              (blur)="loadPreferredContactMethod()"
              (valueChange)="removePhoneNumberValidation('homePhone')"
              > </kendo-maskedtextbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Home Phone:</b> {{getPhoneUseOldText(oldHomePhone)}} <button *ngIf="!(homePhone?.applicableFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldPhone('homePhone',oldHomePhone)">Use Old  </button></p>
            <kendo-formerror *ngIf="homePhone?.phoneNbr?.errors?.required">
              Home Phone is required
            </kendo-formerror>
            <kendo-formerror *ngIf="homePhone?.phoneNbr?.errors?.pattern">
              Home Phone must have 10 digits
            </kendo-formerror>
            <kendo-formerror *ngIf="duplicatePhoneFound">
              Duplicate Phone Number Entered
            </kendo-formerror>
          </kendo-formfield>
          </div>
          <div class="flex-col flex-col-6 mt-checkbox">
            <kendo-formfield>
            <span class="app-checkboxwidtext-wrapper">
              <input
              class="adjust-attr"
              type="checkbox"
              id="homePhone_applicableFlag"
              name="homePhone_applicableFlag"
              kendoCheckBox
              aria-labelledby="homePhone_applicableFlag"
              formControlName="applicableFlag"
                />
              <label class="k-checkbox-label"  for="homePhone_applicableFlag">Not Applicable</label>
            </span>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row mt-1 pl-2  ">
          <div class="flex-col">
            <kendo-formfield>
            <span class="app-checkboxwidtext-wrapper">
              <input
              type="checkbox"
              kendoCheckBox
              aria-labelledby="detailMsgConsentFlag4"
              id="detailMsgConsentFlag4"
              formControlName="detailMsgConsentFlag"
              />
              <label class="k-checkbox-label" for="detailMsgConsentFlag4">Detailed Messages OK</label>
            </span>
          </kendo-formfield>
          </div>
          <div class="flex-col">
            <kendo-formfield>
            <span class="app-checkboxwidtext-wrapper">
              <input
              type="checkbox"
              id="smsTextConsentFlag1"
              aria-labelledby="smsTextConsentFlag1"
              kendoCheckBox
              formControlName="smsTextConsentFlag"
              />
              <label class="k-checkbox-label" for="smsTextConsentFlag1">SMS Text OK</label>
            </span>
          </kendo-formfield>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="(isCerForm && homePhone?.phoneNumberChangedFlag?.value === 'Y') || !isCerForm">
      <div class="block-section block-section-two" formGroupName="cellPhone">
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Cell Phone">
              <kendo-maskedtextbox
              [maskOnFocus]="true"
              aria-label="Cell Phone"
              [disabled]="isNoCellPhoneChecked"
              [maxlength]="10"
              [fillMode]="formUiStyle.inputFillMode"
              formControlName="phoneNbr"
              mask="(999) 000-0000"
              placeholder="Cell Phone"
              (blur)="loadPreferredContactMethod()"
              (valueChange)="removePhoneNumberValidation('cellPhone')"
              > </kendo-maskedtextbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Cell Phone:</b> {{ getPhoneUseOldText(oldCellPhone) }} <button *ngIf="!(cellPhone?.applicableFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldPhone('cellPhone',oldCellPhone)">Use Old  </button></p>

            <kendo-formerror *ngIf="cellPhone?.phoneNbr?.errors?.required">
              Cell Phone is required
            </kendo-formerror>
            <kendo-formerror *ngIf="cellPhone?.phoneNbr?.errors?.pattern">
              Cell Phone must have 10 digits
            </kendo-formerror>
            <kendo-formerror *ngIf="duplicatePhoneFound">
              Duplicate Phone Number Entered
            </kendo-formerror>
          </kendo-formfield>
          </div>
          <div class="flex-col flex-col-6 mt-checkbox">
            <kendo-formfield>
            <span class="app-checkboxwidtext-wrapper">
              <input
              class="adjust-attr"
              type="checkbox"
              id="cellPhone_applicableFlag"
              name="cellPhone_applicableFlag"
              aria-labelledby="cellPhone_applicableFlag"
              kendoCheckBox
              formControlName="applicableFlag"
                />
              <label class="k-checkbox-label" for="cellPhone_applicableFlag">Not Applicable</label>
            </span>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row mt-1 pl-2  ">
          <div class="flex-col">
            <kendo-formfield>
            <span class="app-checkboxwidtext-wrapper">
              <input
              type="checkbox"
              id="detailMsgConsentFlag1"
              aria-labelledby="detailMsgConsentFlag1"
              kendoCheckBox
              formControlName="detailMsgConsentFlag"
              />
              <label class="k-checkbox-label" for="detailMsgConsentFlag1">Detailed Messages OK</label>
            </span>
          </kendo-formfield>
          </div>
          <div class="flex-col">
            <kendo-formfield>
            <span class="app-checkboxwidtext-wrapper">
              <input
              type="checkbox"
              id="smsTextConsentFlag2"
              kendoCheckBox
              aria-labelledby="smsTextConsentFlag2"
              formControlName="smsTextConsentFlag"
              />
              <label class="k-checkbox-label" for="smsTextConsentFlag2">SMS Text OK</label>
            </span>
          </kendo-formfield>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="(isCerForm && homePhone?.phoneNumberChangedFlag?.value === 'Y') || !isCerForm">
      <div class="block-section block-section-two" formGroupName="workPhone">
        <div class="block-section ">
          <div class="flex-row">
            <div class="flex-col flex-col-6">
              <kendo-formfield>
              <kendo-floatinglabel text="Work Phone">
                <kendo-maskedtextbox
                [maskOnFocus]="true"
                aria-label="work phone"
                [disabled]="isNoWorkPhoneChecked"
                [fillMode]="formUiStyle.inputFillMode"
                [maxlength]="10"
                formControlName="phoneNbr"
                mask="(999) 000-0000"
                placeholder="Work Phone"
                (blur)="loadPreferredContactMethod()"
                (valueChange)="removePhoneNumberValidation('workPhone')"
                > </kendo-maskedtextbox>
              </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Work Phone:</b> {{ getPhoneUseOldText(oldWorkPhone) }} <button *ngIf="!(workPhone?.applicableFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldPhone('workPhone',oldWorkPhone)">Use Old  </button></p>

              <kendo-formerror *ngIf="workPhone.phoneNbr.errors?.required">
                Work Phone is required
              </kendo-formerror>
              <kendo-formerror *ngIf="workPhone.phoneNbr.errors?.pattern">
                Work Phone must have 10 digits
              </kendo-formerror>
              <kendo-formerror *ngIf="duplicatePhoneFound">
                Duplicate Phone Number Entered
              </kendo-formerror>
            </kendo-formfield>
            </div>
            <div class="flex-col flex-col-6 mt-checkbox">
              <kendo-formfield>
              <span class="app-checkboxwidtext-wrapper">
                <input
                class="adjust-attr"
                type="checkbox"
                id="workPhone_applicableFlag"
                name="workPhone_applicableFlag"
                kendoCheckBox
                formControlName="applicableFlag"
                aria-labelledby="workPhone_applicableFlag"
                />
                <label class="k-checkbox-label" for="workPhone_applicableFlag">Not Applicable</label>
              </span>
            </kendo-formfield>
            </div>
          </div>
          <div class="flex-row mt-1 pl-2  ">
            <div class="flex-col">
              <kendo-formfield>
              <span class="app-checkboxwidtext-wrapper">
                <input
                type="checkbox"
                id="detailMsgConsentFlag2"
                kendoCheckBox
                aria-labelledby="detailMsgConsentFlag2"
                formControlName="detailMsgConsentFlag"
                />
                <label class="k-checkbox-label" for="detailMsgConsentFlag2">Detailed Messages OK</label>
              </span>
            </kendo-formfield>
            </div>
            <div class="flex-col">
              <kendo-formfield>
              <span class="app-checkboxwidtext-wrapper">
                <input
                type="checkbox"
                id="smsTextConsentFlag3"
                kendoCheckBox
                aria-labelledby="smsTextConsentFlag3"
                formControlName="smsTextConsentFlag"
                />
                <label class="k-checkbox-label" for="smsTextConsentFlag3">SMS Text OK</label>
              </span>
            </kendo-formfield>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="(isCerForm && homePhone?.phoneNumberChangedFlag?.value === 'Y') || !isCerForm">
      <div class="block-section block-section-two" formGroupName="otherPhone">
        <div class="block-section ">
          <div class="flex-row">
            <div class="flex-col flex-col-6">
              <kendo-formfield>
              <kendo-floatinglabel text="Other Phone">
                <kendo-maskedtextbox
                [maskOnFocus]="true"
                [disabled]="isNoOtherPhoneChecked"
                aria-label="other phone"
                [fillMode]="formUiStyle.inputFillMode"
                [maxlength]="10"
                formControlName="phoneNbr"
                mask="(999) 000-0000"
                placeholder="Other Phone"
                (blur)="loadPreferredContactMethod()"
                (valueChange)="removePhoneNumberValidation('otherPhone')"
                > </kendo-maskedtextbox>
              </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Other Phone:</b> {{ getPhoneUseOldText(oldOtherPhone) }} <button *ngIf="!(otherPhone?.applicableFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button"(click)="useOldPhone('otherPhone',oldOtherPhone)">Use Old  </button></p>

              <kendo-formerror *ngIf="otherPhone.phoneNbr.errors?.required">
                Other Phone is required
              </kendo-formerror>
              <kendo-formerror *ngIf="otherPhone.phoneNbr.errors?.pattern">
                Other Phone must have 10 digits
              </kendo-formerror>
              <kendo-formerror *ngIf="duplicatePhoneFound">
                Duplicate Phone Number Entered
              </kendo-formerror>
            </kendo-formfield>
            </div>
            <div class="flex-col flex-col-3">
              <kendo-formfield>
              <kendo-floatinglabel text="Note">
                <kendo-textbox
                [disabled]="isNoOtherPhoneChecked"
                aria-label="note"
                [fillMode]="formUiStyle.inputFillMode"
                [maxlength]="100"
                formControlName="otherPhoneNote"
                placeholder="Note"
                  > </kendo-textbox>
              </kendo-floatinglabel>
              <kendo-formerror *ngIf="otherPhone.otherPhoneNote.errors?.required">
                Note is required
              </kendo-formerror>
              <kendo-formerror *ngIf="otherPhone.otherPhoneNote.errors?.pattern">
                Special characters are not allowed
              </kendo-formerror>
            </kendo-formfield>
            </div>
            <div class="flex-col flex-col-3 mt-checkbox">
              <kendo-formfield>
              <span class="app-checkboxwidtext-wrapper">
                <input
                class="adjust-attr"
                type="checkbox"
                id="otherPhone_applicableFlag"
                name="otherPhone_applicableFlag"
                kendoCheckBox
                formControlName="applicableFlag"
                aria-labelledby="otherPhone_applicableFlag"
                />
                <label class="k-checkbox-label" for="otherPhone_applicableFlag">Not Applicable</label>
              </span>
            </kendo-formfield>
            </div>
          </div>
          <div class="flex-row mt-1 pl-2  ">
            <div class="flex-col">
              <kendo-formfield>
              <span class="app-checkboxwidtext-wrapper">
                <input
                type="checkbox"
                id="detailMsgConsentFlag3"
                kendoCheckBox
                formControlName="detailMsgConsentFlag"
                aria-labelledby="detailMsgConsentFlag3"
                />
                <label class="k-checkbox-label" for="detailMsgConsentFlag3">Detailed Messages OK</label>
              </span>
            </kendo-formfield>
            </div>
            <div class="flex-col">
              <kendo-formfield>
              <span class="app-checkboxwidtext-wrapper">
                <input
                type="checkbox"
                id="smsTextConsentFlag4"
                kendoCheckBox
                formControlName="smsTextConsentFlag"
                aria-labelledby="smsTextConsentFlag4"
                />
                <label class="k-checkbox-label" for="smsTextConsentFlag4">SMS Text OK</label>
              </span>
            </kendo-formfield>
            </div>
          </div>
        </div>
      </div>
    </div>
      <div class="block-section block-section-two " formGroupName="email">
        <div class="block-section ">
          <div class="flex-row cer-top-space" *ngIf="isCerForm">
            <div class="flex-col">
            <kendo-formfield>
              <fieldset class="k-form-fieldset">
                <legend class="k-form-legend"><h5>Has their email address changed?</h5></legend>

              <div class="component-list-h comp-list-horizontal">
                <span class="app-radiobtnwidtext-wrapper">
                  <input type="radio" kendoRadioButton   aria-labelledby="emailaddresschangedYes"
                    id="emailaddresschangedYes"
                    class="form-control"
                    value="Y"
                    formControlName="emailAddressChangedFlag"
                    (change)="adjustCerChangeFlagValues('email_emailAddressChangedFlag', 'Y')"
                  />
                  <kendo-label
                    class="k-radio-label"
                    for="emailaddresschangedYes"
                    text="Yes"
                  ></kendo-label>
                </span>
                <span class="app-radiobtnwidtext-wrapper">
                  <input
                    type="radio"
                    kendoRadioButton
                    aria-labelledby="emailaddresschangedNo"
                    id="emailaddresschangedNo"
                    value="N"
                    formControlName="emailAddressChangedFlag"
                    (change)="adjustCerChangeFlagValues('email_emailAddressChangedFlag', 'N')"
                  />
                  <kendo-label
                    class="k-radio-label"
                    for="emailaddresschangedNo"
                    text="No"
                  ></kendo-label>
                </span>
              </div>
              </fieldset>
              <kendo-formerror *ngIf="email?.emailAddressChangedFlag?.errors?.required">
                Has their email address changed is required
              </kendo-formerror>
            </kendo-formfield>
              <h5 *ngIf="email?.emailAddressChangedFlag?.value === 'Y'">Enter their new email:</h5>
            </div>
            </div>
            <div *ngIf="(isCerForm && email?.emailAddressChangedFlag?.value === 'Y') || !isCerForm">
          <div class="flex-row">
            <div class="flex-col flex-col-6">
              <kendo-formfield>
              <kendo-floatinglabel text="Email Address">
                <kendo-textbox
                aria-label="email address optional"
                [fillMode]="formUiStyle.inputFillMode"
                [maxlength]="100"
                formControlName="email"
                placeholder="Email Address"
                (blur)="loadPreferredContactMethod()"
                (valueChange)="removeEmailValidation()"
                > </kendo-textbox>
              </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Email Address:</b> {{getEmailUseOldText(oldEmail)}} <button *ngIf="!(email?.applicableFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldEmail(oldEmail)">Use Old  </button></p>

              <kendo-formerror *ngIf="email.email.errors?.required">
                Email Address is required
              </kendo-formerror>
              <kendo-formerror *ngIf="email.email.errors?.pattern">
                Not a valid email format
              </kendo-formerror>
            </kendo-formfield>
            </div>
            <div class="flex-col flex-col-6 mt-checkbox">
              <kendo-formfield>
              <span class="app-checkboxwidtext-wrapper">
                <input
                class="adjust-attr"
                type="checkbox"
                id="email_applicableFlag"
                name="email_applicableFlag"
                kendoCheckBox
                formControlName="applicableFlag"
                aria-labelledby="email_applicableFlag"
                />
                <label class="k-checkbox-label" for="email_applicableFlag">Not Applicable</label>
              </span>
            </kendo-formfield>
            </div>
          </div>
          <div class="flex-row mt-1 pl-2  ">
            <div class="flex-col">
              <kendo-formfield>
              <span class="app-checkboxwidtext-wrapper">
                <input
                type="checkbox"
                id="detailedMessageOk"
                kendoCheckBox
                formControlName="detailMsgFlag"
                aria-labelledby="detailedMessageOk"
                />
                <label class="k-checkbox-label" for="detailedMessageOk"  >Detailed Messages OK</label>
              </span>
            </kendo-formfield>
            </div>
            <div class="flex-col">
              <kendo-formfield>
              <span class="app-checkboxwidtext-wrapper">
                <input
                type="checkbox"
                id="gopaperless"
                kendoCheckBox
                formControlName="paperlessFlag"
                aria-labelledby="gopaperless"
                />
                <label class="k-checkbox-label" for="gopaperless">Go paperless and send important notices via email, when
                  possible</label>
              </span>
            </kendo-formfield>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="(isCerForm && (email?.emailAddressChangedFlag?.value === 'Y' || homePhone?.phoneNumberChangedFlag?.value === 'Y')) || !isCerForm">
        <div class="block-section mt-1">
          <h5 *ngIf="isCerForm">What is their preferred contact method?</h5>
          <div class="flex-row">
            <div class="flex-col flex-col-6">
              <kendo-formfield>
              <kendo-floatinglabel text="Preferred Contact" class="inline-search-loader">
                <span *ngIf="showPreferredContactLoader" class=" k-icon k-i-loading k-input-loading-icon input-inline-loader"  ></span>
                <kendo-dropdownlist
                aria-labelledby="Preferred Contact"
                [fillMode]="formUiStyle.dropDownFillMode"
                [data]="preferredContactMethods"
                formControlName="preferredContactMethod"
                >
                </kendo-dropdownlist>
              </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Preferred Contact Method: </b>{{oldPreferredContactMethodName}} - {{ oldPreferredContact }} </p>

              <kendo-formerror>Preferred contact is required</kendo-formerror>
            </kendo-formfield>
            </div>
          </div>
        </div>
      </div>
    </div>
      <!-- Contact Family and dependent details -->
      <div class="block-section block-section-two" formGroupName="familyAndFriendsContact">
        <div class="flex-row cer-top-space" *ngIf="isCerForm">
          <div class="flex-col">
          <kendo-formfield>
            <fieldset class="k-form-fieldset">
              <legend class="k-form-legend"><h5>Has their alternate contact changed?</h5></legend>
            <div class="component-list-h comp-list-horizontal">
              <span class="app-radiobtnwidtext-wrapper">
                <input type="radio" kendoRadioButton   aria-labelledby="friendorfamilycontactchangedYes"
                  id="friendorfamilycontactchangedYes"
                  class="form-control"
                  value="Y"
                  formControlName="friendFamilyChangedFlag"
                  (change)="adjustCerChangeFlagValues('familyAndFriendsContact_friendFamilyChangedFlag', 'Y')"
                />
                <kendo-label
                  class="k-radio-label"
                  for="friendorfamilycontactchangedYes"
                  text="Yes"
                ></kendo-label>
              </span>
              <span class="app-radiobtnwidtext-wrapper">
                <input
                  type="radio"
                  kendoRadioButton
                  aria-labelledby="friendorfamilycontactchangedNo"
                  id="friendorfamilycontactchangedNo"
                  value="N"
                  formControlName="friendFamilyChangedFlag"
                  (change)="adjustCerChangeFlagValues('familyAndFriendsContact_friendFamilyChangedFlag', 'N')"
                />
                <kendo-label
                  class="k-radio-label"
                  for="friendorfamilycontactchangedNo"
                  text="No"
                ></kendo-label>
              </span>
            </div>
            </fieldset>
            <kendo-formerror *ngIf="fAfContact?.friendFamilyChangedFlag?.errors?.required">
              Has their alternate contact changed is required
            </kendo-formerror>
          </kendo-formfield>
            <div class="new-fmly-ct">
            <h5 *ngIf="fAfContact?.friendFamilyChangedFlag?.value === 'Y'">Enter their new contact:</h5>
          </div>
          </div>
          </div>
          <div *ngIf="(isCerForm && fAfContact?.friendFamilyChangedFlag?.value === 'Y') || !isCerForm">
        <div class="flex-row">
          <div class="flex-col flex-col-6 mat-split-list mt-2 justify-content-between">
            <h5 class="text-capital">Alternate Contact</h5>
            <kendo-formfield>
            <span class="app-checkboxwidtext-wrapper">
              <input
              class="adjust-attr"
              type="checkbox"
              id="noFriendOrFamilyContactFlag"
              name="familyAndFriendsContact_noFriendOrFamilyContactFlag"
              kendoCheckBox
              formControlName="noFriendOrFamilyContactFlag"
              aria-labelledby="noFriendOrFamilyContactFlag"
              />
              <label class="k-checkbox-label" for="noFriendOrFamilyContactFlag">No alternate contact</label>
            </span>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Contact's First Name">
              <kendo-textbox
              aria-label="Contact's First Name"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="40"
              formControlName="firstName"
              placeholder="Contact's First Name"
              > </kendo-textbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old First Name: </b> {{oldFriendsOrFamilyContact?.firstName}} <button *ngIf="!(fAfContact?.noFriendOrFamilyContactFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('familyAndFriendsContact.firstName',oldFriendsOrFamilyContact?.firstName??'')">Use Old  </button></p>

            <kendo-formerror *ngIf="fAfContact.firstName.errors?.required">
              Contact's First Name is required
            </kendo-formerror>
            <kendo-formerror *ngIf="fAfContact.firstName.errors?.pattern">
              Special characters are not allowed except '-'
            </kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Contact's Last Name">
              <kendo-textbox
              aria-label="Contact's Last Name"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="40"
              formControlName="lastName"
              placeholder="Contact's Last Name"
              > </kendo-textbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Last Name: </b> {{oldFriendsOrFamilyContact?.lastName}} <button *ngIf="!(fAfContact?.noFriendOrFamilyContactFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button" (click)="useOldOnClick('familyAndFriendsContact.lastName',oldFriendsOrFamilyContact?.lastName??'')">Use Old  </button></p>

            <kendo-formerror *ngIf="fAfContact.lastName.errors?.required">
              Contact's Last Name is required
            </kendo-formerror>
            <kendo-formerror *ngIf="fAfContact.lastName.errors?.pattern">
              Special characters are not allowed except '-'
            </kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Contact's Relationship to Client">
              <kendo-dropdownlist
              aria-label="Contact's Relationship to Client"
              [fillMode]="formUiStyle.dropDownFillMode"
              [data]="ddlRelationships$ | async"
              [disabled]="isNoFriendsOrFamilyChecked"
              textField="lovDesc"
              valueField="lovCode"
              [valuePrimitive]="true"
              formControlName="contactRelationshipCode"
              >
              </kendo-dropdownlist>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Relationship: </b> {{oldFriendsOrFamilyContact?.contactRelationshipDesc}} <button *ngIf="!(fAfContact?.noFriendOrFamilyContactFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button"  (click)="useOldOnClick('familyAndFriendsContact.contactRelationshipCode',oldFriendsOrFamilyContact?.contactRelationshipCode??'')">Use Old  </button></p>

            <kendo-formerror>Contact's Relationship to Client is required</kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row" *ngIf="showRelationshipOtherDec">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Other Description">
              <kendo-textbox
              aria-label="other description"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="50"
              formControlName="otherDesc"
              placeholder="Description"
              > </kendo-textbox>
            </kendo-floatinglabel>

            <kendo-formerror *ngIf="fAfContact.otherDesc.errors?.required">
              Other Description is required
            </kendo-formerror>
            <kendo-formerror *ngIf="fAfContact.otherDesc.errors?.pattern">
              Special characters are not allowed
            </kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col flex-col-6">
            <kendo-formfield>
            <kendo-floatinglabel text="Contact's Phone Number">
              <kendo-maskedtextbox
              [maskOnFocus]="true"
              [disabled]="isNoFriendsOrFamilyChecked"
              aria-label="contacts phone number"
              [fillMode]="formUiStyle.inputFillMode"
              [maxlength]="10"
              formControlName="contactPhoneNbr"
              mask="(999) 000-0000"
              placeholder="Contact's Phone Number"
              (valueChange)="removePhoneNumberValidation('contactPhoneNbr')"
              > </kendo-maskedtextbox>
            </kendo-floatinglabel>
            <p class="user-old-section" *ngIf="isCerForm"><b>Old Phone Number:</b> {{ getPhoneUseOldText(oldPhoneNumber) }} <button *ngIf="!(fAfContact?.noFriendOrFamilyContactFlag?.value ?? false)" aria-label="Use Old" kendoButton look="flat" class="card-link-button"(click)="useOldPhone('familyAndFriendsContact',oldPhoneNumber)">Use Old  </button></p>
             <kendo-formerror *ngIf="fAfContact?.contactPhoneNbr?.errors?.required">
              Contact's Phone Number is required
            </kendo-formerror>
            <kendo-formerror *ngIf="fAfContact?.contactPhoneNbr?.errors?.pattern">
              Contact's Phone Number must have 10 digits
            </kendo-formerror>
          </kendo-formfield>
          </div>
        </div>
        <div class="flex-col">
          <div class="component-list-h ml-3 mt-1">
            <span class="app-checkboxwidtext-wrapper">
              <input formControlName="detailMsgConsentFlag" type="checkbox" kendoCheckBox
                aria-labelledby="detailedMessagesOk" id="detailedMessagesOk" />
              <label class="k-checkbox-label" for="detailedMessagesOk">Detailed Messages OK</label>
            </span>
            <span class="app-checkboxwidtext-wrapper">
              <input formControlName="smsTextConsentFlag" type="checkbox" kendoCheckBox aria-labelledby="smsTextOk"
                id="smsTextOk" />
              <label class="k-checkbox-label" for="smsTextOk">SMS Texts OK</label>
            </span>
          </div>
        </div>
      </div>
    </div>
    </form>
  </section>
</div>

<!-- Mail Address Validation Modal -->
<kendo-dialog *ngIf="mailAddressValidationPopupVisibility$ | async" (close)="onAddressValidationCloseClicked('M')"
  class="app-c-modal app-c-modal-md app-c-modal-np" title="Mailing Address Validation">
  <section class="k-dialog-body mb-2">
    <div *ngIf="mailingAddressIsNotValid">
      <p >
        We cannot validate the address below. Please review and make edits if needed.
      </p>
        <div class="mt-2 ml-3">
        <p>  {{mailAddressEntered?.address1 | uppercase }}   </p>
       <p> {{mailAddressEntered?.address2 | uppercase }}   </p>
       <p>    {{mailAddressEntered?.city | uppercase }}, {{mailAddressEntered?.state}} {{mailAddressEntered?.zip5}}</p>

        </div>
    </div>
   <div *ngIf="!mailingAddressIsNotValid">
    <p >
      We found the address similar to the one entered. Please select which one to use.
    </p>
    <form [formGroup]="selectedAddressForm">
    <kendo-formfield>
    <div class="flex-row mt-4 break">
      <div class="flex-col flex-col-6">
          <span>
          <input
          type="radio"
          id="chosenmailAddressEntered"
          name="chosenAddress"
          value="addressEntered"
          formControlName="chosenAddress"
          kendoRadioButton
          aria-labelledby="chosenmailAddressEntered"
          />
          <kendo-label for="chosenmailAddressEntered" text="Address Entered"></kendo-label>
        </span>
        <div class="mt-2 ml-3 break">
      <p>  {{mailAddressEntered?.address1 | uppercase }} </p>
      <p> {{mailAddressEntered?.address2 | uppercase }} </p>
      <p>  {{mailAddressEntered?.city | uppercase }}, {{mailAddressEntered?.state}} {{mailAddressEntered?.zip5}}</p>
        </div >
      </div>
      <div class="flex-col flex-col-6">
          <span>
          <input
          type="radio"
          id="chosenmailAddressSuggested"
          name="chosenAddress"
          aria-labelledby="chosenmailAddressSuggested"
          value="addressSuggested"
          formControlName="chosenAddress"
          kendoRadioButton
          />
          <kendo-label for="chosenmailAddressSuggested" text="Suggested Address"></kendo-label>
        </span>
      <div class="mt-2 ml-3 break">
        <p>   {{mailAddressSuggested?.address1}}</p>
        <p>  {{mailAddressSuggested?.address2}} </p>
        <p>  {{mailAddressSuggested?.city}}, {{mailAddressSuggested?.state}} {{mailAddressSuggested?.zip5}}{{mailAddressSuggested?.zip4 ? '-'+mailAddressSuggested?.zip4:''}}</p>
      </div>
      </div>
    </div>
  </kendo-formfield>
</form>
   </div>
  </section>
  <kendo-dialog-actions>
    <div class="justify-content-between">
      <div class="justify-content-end">
        <button kendoButton [primary]="true" (click)="onAddressValidationCloseClicked('M')" aria-label="Okay" *ngIf="mailingAddressIsNotValid">
          OKAY
        </button>
        <button kendoButton [primary]="true" (click)="onUseSelectedAddressClicked('M')"  aria-label="Use Selected Address" *ngIf="!mailingAddressIsNotValid">
          USE SELECTED ADDRESS
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>

<!-- Home Address Validation Modal -->
<kendo-dialog *ngIf="homeAddressValidationPopupVisibility$ | async" (close)="onAddressValidationCloseClicked('H')"
  class="app-c-modal app-c-modal-md app-c-modal-np" title="Home Address Validation">
  <section class="k-dialog-body mb-2">
    <div *ngIf="homeAddressIsNotValid">
      <p >
        We cannot validate the address below. Please review and make edits if needed.
      </p>
        <p class="mt-2 ml-3">
          {{homeAddressEntered?.address1 | uppercase }} <br>
          {{homeAddressEntered?.address2 | uppercase }} <br>
          {{homeAddressEntered?.city | uppercase }}, {{homeAddressEntered?.state}} {{homeAddressEntered?.zip5}}
        </p>
    </div>
   <div *ngIf="!homeAddressIsNotValid">
    <p >
      We found the address similar to the one entered. Please select which one to use.
    </p>
    <form [formGroup]="selectedAddressForm">
    <kendo-formfield>
    <div class="flex-row mt-4">
      <div class="flex-col flex-col-6">
          <span>
          <input
          type="radio"
          id="chosenhomeAddressEntered"
          name="chosenAddress"
          value="addressEntered"
          formControlName="chosenAddress"
          kendoRadioButton
          aria-labelledby="chosenhomeAddressEntered"
          />
          <kendo-label for="chosenhomeAddressEntered" text="Address Entered"></kendo-label>
        </span>
        <div class="mt-2 ml-3 break">
          <p>  {{homeAddressEntered?.address1 | uppercase }} </p>
          <p> {{homeAddressEntered?.address2 | uppercase }} </p>
          <p>  {{homeAddressEntered?.city | uppercase }}, {{homeAddressEntered?.state}} {{homeAddressEntered?.zip5}} </p>
        </div >
      </div>
      <div class="flex-col flex-col-6">
          <span>
          <input
          type="radio"
          id="chosenhomeAddressSuggested"
          name="chosenAddress"
          aria-labelledby="chosenhomeAddressSuggested"
          value="addressSuggested"
          formControlName="chosenAddress"
          kendoRadioButton
          />
          <kendo-label for="chosenhomeAddressSuggested" text="Suggested Address"></kendo-label>
        </span>

        <div class="mt-2 ml-3 break">
          <p>  {{homeAddressSuggested?.address1}} </p>
          <p>  {{homeAddressSuggested?.address2}} </p>
          <p>  {{homeAddressSuggested?.city}}, {{homeAddressSuggested?.state}} {{homeAddressSuggested?.zip5}}{{homeAddressSuggested?.zip4 ? '-'+homeAddressSuggested?.zip4:''}}</p>
        </div>
      </div>
    </div>
  </kendo-formfield>
</form>
   </div>
  </section>
  <kendo-dialog-actions>
    <div class="justify-content-between">
      <div class="justify-content-end">
        <button kendoButton [primary]="true" (click)="onAddressValidationCloseClicked('H')" aria-label="Okay" *ngIf="homeAddressIsNotValid">
          OKAY
        </button>
        <button kendoButton [primary]="true" (click)="onUseSelectedAddressClicked('H')"  aria-label="Use Selected Address" *ngIf="!homeAddressIsNotValid">
          USE SELECTED ADDRESS
        </button>
      </div>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>

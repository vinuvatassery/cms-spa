<div class="flex-row">
    <div class="flex-col  ">

        <div class="app-c-table">

            <kendo-grid [pageSize]="5" [pageable]="true" [data]="StatusPeriod$ | async">
                <ng-template kendoGridDetailTemplate let-dataItem title="Status Start">
                    <section *ngIf="dataItem.RamseelInfo">
                        <div class="flex-col flex-col-6 mt-2 p-0">
                            <h4>Ramsell Info</h4>
                            <table>
                                <caption hidden> Ramsell Info</caption>
                                <tr hidden>
                                    <th scope="col"></th>
                                    <th scope="col"></th>
                                    <th scope="col"></th>
                                </tr>
                                <tbody>
                                    <tr>
                                        <td class="greycolor"> Most Recent Transfer</td>
                                        <td> {{dataItem.RamseelInfo.MostRecentTransfer}}</td>
                                    </tr>
                                    <tr>
                                        <td class="greycolor"> Card Requested</td>
                                        <td> {{dataItem.RamseelInfo.CardRequested}}</td>
                                    </tr>
                                    <tr>
                                        <td class="greycolor"> Date Card Last Sent</td>
                                        <td> {{dataItem.RamseelInfo.DateCardLastSent}}</td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>

                    </section>
                    <div *ngIf="dataItem.GroupHistory" class="mt-5">
                        <h4>Group History</h4>

                        <table>
                            <caption hidden> Group History</caption>
                            <tr>
                                <th>Group</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Actual Days in Group</th>
                                <th>Date Record Created</th>
                                <th>Record Created By</th>
                            </tr>
                            <tbody>
                                <tr *ngFor="let GroupHistory of dataItem.GroupHistory">
                                    <td> {{GroupHistory.groupCodeDesc}}</td>
                                    <td>
                                        <a *ngIf="GroupHistory.isFutureStartDate">Scheduled for
                                            {{GroupHistory.groupStartDate}} </a>
                                        <span
                                            *ngIf="!GroupHistory.isFutureStartDate">{{GroupHistory.groupStartDate}}</span>
                                    </td>
                                    <td> {{GroupHistory.groupEndDate}}</td>
                                    <td> {{GroupHistory.actualDaysinGroup}}</td>
                                    <td> {{GroupHistory.creationTime}}</td>
                                    <td>
                                        <button kendoButton [primary]="true" class="avatar-sm-btn c-default"
                                            kendoPopoverAnchor [popover]="onUserProfileDetailsHovered" showOn="hover"
                                            aria-label="profile avathar">
                                            <common-user-photo-icon
                                                [userId]="GroupHistory.creatorId"></common-user-photo-icon>
                                        </button>
                                        <kendo-popover #onUserProfileDetailsHovered width="330" position="left">
                                            <ng-template kendoPopoverBodyTemplate>
                                                <common-user-profile-card
                                                    [userId]="GroupHistory.creatorId"></common-user-profile-card>
                                            </ng-template>
                                        </kendo-popover>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                    </div>
                    <div *ngIf="dataItem.FlipHistory" class="mt-5 mb-2">
                        <h4>FPL History</h4>

                        <table>
                            <caption hidden> FPL History</caption>
                            <tr>
                                <th>FPL</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Actual Days with Flp</th>
                                <th>Date Record Created</th>
                                <th>Record Created By</th>
                            </tr>
                            <tbody>
                                <tr *ngFor="let FlipHistory of dataItem.FlipHistory">
                                    <td> {{FlipHistory.fplPercentage}}</td>
                                    <td> {{FlipHistory.fplStartDate}}</td>
                                    <td> {{FlipHistory.fplEndDate}}</td>
                                    <td> {{FlipHistory.actualDayswithFlp}}</td>
                                    <td> {{FlipHistory.creationTime}}</td>
                                    <td>
                                        <button kendoButton [primary]="true" class="avatar-sm-btn c-default"
                                            kendoPopoverAnchor [popover]="onUserProfileDetailsHovered" showOn="hover"
                                            aria-label="profile avathar">
                                            <common-user-photo-icon
                                                [userId]="FlipHistory.creatorId"></common-user-photo-icon>
                                        </button>
                                        <kendo-popover #onUserProfileDetailsHovered width="330" position="left">
                                            <ng-template kendoPopoverBodyTemplate>
                                                <common-user-profile-card
                                                    [userId]="FlipHistory.creatorId"></common-user-profile-card>
                                            </ng-template>
                                        </kendo-popover>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                    </div>
                </ng-template>
                <kendo-grid-column field="StatusStart" title="Status Start" [width]="100"></kendo-grid-column>
                <kendo-grid-column field="StatusEnd" title="Status End" [width]="100"></kendo-grid-column>
                <kendo-grid-column field="Status" title="Status" [width]="100"></kendo-grid-column>
                <kendo-grid-column field="CurrentGroup" title="Current Group" [width]="100"></kendo-grid-column>
                <kendo-grid-column field="DaysinGroup" title="Days in Group" [width]="100"></kendo-grid-column>
                <kendo-grid-column field="FamilySize" title="Family Size" [width]="100"></kendo-grid-column>
                <kendo-grid-column field="GrossMonthlyIncome" title="Gross Monthly Income" [width]="100">
                </kendo-grid-column>
                <kendo-grid-column field="FPLSPStart" title="FPLSP Start" [width]="100"></kendo-grid-column>
                <kendo-grid-column field="CurrentFPL" title="Current FPL" [width]="100"></kendo-grid-column>
                <kendo-grid-column field="ReviewCompleted" title="Review Completed" [width]="100"></kendo-grid-column>
                <kendo-grid-column field="CurrentFPL" title="Current FPL" [width]="100"></kendo-grid-column>
                <kendo-grid-column field="by" title="By" [width]="50">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <button kendoButton [primary]="true" class="avatar-sm-btn c-default" kendoPopoverAnchor
                            [popover]="onUserProfileDetailsHovered" showOn="hover"
                            aria-label="profile avatar of Anil Kumar">
                            <div mat-card-avatar="" class="app-c-avatar avatar-sm">
                                <span class="profile-text-avatar">AK</span>
                            </div>
                        </button>
                        <kendo-popover #onUserProfileDetailsHovered width="330" position="left">
                            <ng-template kendoPopoverBodyTemplate>
                                <common-user-profile-card></common-user-profile-card>
                            </ng-template>
                        </kendo-popover>
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column field="Option" title="Options" [width]="50" class="text-center">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <kendo-dropdownbutton [data]="actions" icon="more-vertical" title="More Options"
                            class="TableActionPopup app-dropdown-action" buttonClass="k-icon-button"
                            aria-label="more actions" [popupSettings]="{ popupClass: popupClassAction, animate: true }">

                            <ng-template class="app-dropdown-action-list" kendoDropDownButtonItemTemplate let-dataItem>
                                <button kendoButton look="flat" [attr.aria-label]="dataItem.text"
                                    [class]="dataItem.buttonType" aria-hidden="false" (click)="dataItem.click">
                                    <span class="material-icons"
                                        [attr.aria-label]="dataItem.text">{{dataItem.icon}}</span>
                                    <label> {{ dataItem.text }} </label>
                                </button>
                            </ng-template>
                        </kendo-dropdownbutton>
                    </ng-template>
                </kendo-grid-column>

                <!-- Pagination Template -->
                <ng-template kendoPagerTemplate let-totalPages="totalPages" let-pagerFirstPage="pagerFirstPage"
                    let-currentPage="currentPage">
                    <div class="grid-custom-paginationtemplates d-flex">
                        <div class="d-flex align-items-center">
                            <label class="mr-1">Rows Per Page</label>
                            <kendo-dropdownlist [fillMode]="formUiStyle.dropDownFillMode" [data]="pageSizes"
                                [textField]="'text'" [valueField]="'value'" [valuePrimitive]="true"
                                [(value)]="state.take"></kendo-dropdownlist>
                            <kendo-pager-info> </kendo-pager-info>
                            <kendo-grid-messages [pagerItems]="' '" [pagerPage]="'Page'"> </kendo-grid-messages>

                        </div>
                        <div class="d-flex">
                            <kendo-pager-input></kendo-pager-input>
                            <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                            <kendo-pager-next-buttons></kendo-pager-next-buttons>
                        </div>
                    </div>
                </ng-template>
                <!-- grid Loader Template -->
                <ng-template kendoGridLoadingTemplate>
                    <common-grid-loader-component></common-grid-loader-component>
                </ng-template>
                <!-- grid No data Template -->
                <ng-template kendoGridNoRecordsTemplate>
                    <div> <kendo-badge-container> <span class="material-icons"> info </span> </kendo-badge-container>
                    </div>
                    <p>There is no data to display.</p>
                </ng-template>

            </kendo-grid>
        </div>

    </div>
</div>

<!-- Eligibility Group Detail Modal -->
<kendo-dialog *ngIf="isGroupDetailOpened$ | async " (close)="onGroupDetailClosed()"
    class="app-c-modal app-c-modal-sm app-c-modal-np" kendoTooltip>
    <kendo-dialog-titlebar> Change Group </kendo-dialog-titlebar>
    <case-management-group-detail [showDeleteOption]="true" [currentGroup$]="currentGroup$" [ddlGroups$]="ddlGroups$"
        (updateGroup)="onGroupChangeUpdateClicked($event)"
        (cancelGroupChange)="onGroupChangeCancelClicked()"></case-management-group-detail>
</kendo-dialog>
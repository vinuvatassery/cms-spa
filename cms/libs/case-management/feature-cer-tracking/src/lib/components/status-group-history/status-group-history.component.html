<h4>Group History</h4>

<kendo-grid [data]="statusGroupHistory" [loading]="loader">
    <kendo-grid-column field="groupCodeDesc" title="Group" [width]="100"></kendo-grid-column>
    <kendo-grid-column field="groupStartDate" title="Start Date" [width]="100">
        <ng-template kendoGridCellTemplate let-dataItem>
            <div *ngIf="dataItem.isFutureStartDate">
                <button aria-label="scheduled link" kendoButton look="flat" class="card-link-button"
                    (click)="loadEligibilityChangeModal(dataItem)">
                    Scheduled for {{dataItem.groupStartDate | date:'MM/dd/yyyy'}}
                </button>
            </div>
            <div *ngIf="!dataItem.isFutureStartDate">
                {{dataItem.groupStartDate | date:'MM/dd/yyyy'}}
            </div>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="groupEndDate" title="End Date" [width]="100">
        <ng-template kendoGridCellTemplate let-dataItem>
            {{dataItem.groupEndDate |date:'MM/dd/YYYY'}}
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="actualDaysInGroup" title="Actual Days in Group" [width]="100"></kendo-grid-column>
    <kendo-grid-column field="creationTime" title="Date Record Created" [width]="100">
        <ng-template kendoGridCellTemplate let-dataItem>
            {{dataItem.creationTime |date:'MM/dd/YYYY hh:mm:ss'}}
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="by" title="Record Created By" [width]="80">
        <ng-template kendoGridCellTemplate let-dataItem>
            <button kendoButton [primary]="true" class="avatar-sm-btn c-default" kendoPopoverAnchor
                [popover]="onUserProfileDetailsHovered" showOn="hover" aria-label="profile avathar">
                <common-user-photo-icon [userId]="dataItem.creatorId"></common-user-photo-icon>
            </button>
            <kendo-popover #onUserProfileDetailsHovered width="330" position="left">
                <ng-template kendoPopoverBodyTemplate>
                    <common-user-profile-card [userId]="dataItem.creatorId"></common-user-profile-card>
                </ng-template>
            </kendo-popover>
        </ng-template>
    </kendo-grid-column>
    <!-- grid Loader Template -->
    <ng-template kendoGridLoadingTemplate>
        <common-grid-loader-component></common-grid-loader-component>
    </ng-template>
    <!-- grid No data Template -->
    <ng-template kendoGridNoRecordsTemplate>
        <div> <kendo-badge-container> <span class="material-icons"> info </span> </kendo-badge-container>
        </div>
        <p>There is no data to display.</p>
    </ng-template>
</kendo-grid>

<!-- Eligibility Group Detail Modal -->
<kendo-dialog *ngIf="isGroupDetailOpened" (close)="onGroupDetailClosed()"
    class="app-c-modal app-c-modal-sm app-c-modal-np" kendoTooltip>
    <kendo-dialog-titlebar>Edit Scheduled Group Change </kendo-dialog-titlebar>
    <case-management-group-detail [showDeleteOption]="true" [currentGroup$]="currentGroup$" [ddlGroups$]="ddlGroups$"
        (updateGroup)="onGroupChangeUpdateClicked($event)" (deleteGroupChange)="onDeleteGroupClicked($event)"
        (cancelGroupChange)="onGroupChangeCancelClicked($event)">
    </case-management-group-detail>
</kendo-dialog>

<!-- Eligibility Group delete Modal -->
<kendo-dialog *ngIf="isGroupDeleteModalOpened" (close)="onCancelDelete()"
    class="app-c-modal app-c-modal-sm app-c-modal-np" kendoTooltip>
    <kendo-dialog-titlebar> Delete scheduled group change </kendo-dialog-titlebar>
    <section class="k-dialog-body">
        <p class="text-muted mb-2">
            This action cannot be undone. You may schedule another group change at any time.
        </p>
    </section>
    <kendo-dialog-actions>
        <div class="justify-content-between">
            <button kendoButton aria-label="delete client’s benefits" [primary]="true" look="outline"
                (click)="onConfirmGroupDelete()">
                Delete
            </button>
            <div class="justify-content-end">
                <button kendoButton aria-label="cancel client’s benefits" [primary]="true" look="outline"
                    (click)="onCancelDelete()">
                    Cancel
                </button>
            </div>
        </div>
    </kendo-dialog-actions>
</kendo-dialog>
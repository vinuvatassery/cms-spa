<!-- Income List -->
<div class="flex-row">
  <div class="flex-col">
    <div class="app-c-table" *ngIf="!hasNoIncome">
      <kendo-grid [data]="incomes$ | async">
        <kendo-grid-column
          field="incomeSourceCode"
          title="Income Source"
          [width]="140"
        >
          <ng-template
            kendoGridFooterTemplate
            let-column
            let-columnIndex="columnIndex"
          >
            Total Monthly Income
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="incomeTypeCode" title="Income Type" [width]="130">
        </kendo-grid-column>
        <kendo-grid-column
          field="incomeAmt"
          title="Amount"
          [width]="130"
        ></kendo-grid-column>
        <kendo-grid-column
          field="incomeFrequencyCode"
          title="Frequency"
          [width]="110"
        ></kendo-grid-column>
        <kendo-grid-column
          field="incomeStartDate"
          title="Income Start"
          [width]="110"
        >
        <ng-template kendoGridCellTemplate let-dataItem>
            {{dataItem.incomeStartDate| date: 'MM/dd/yyyy'}}
        </ng-template>
      </kendo-grid-column>
        <kendo-grid-column
          field="incomeEndDate"
          title="Income End"
          [width]="110"
        >
        <ng-template kendoGridCellTemplate let-dataItem>
          {{dataItem.incomeEndDate| date: 'MM/dd/yyyy'}}
      </ng-template>
      </kendo-grid-column>
        <kendo-grid-column
          field="ProofofIncome"
          title="Proof of Income"
          [width]="150"
        >
          <ng-template kendoGridCellTemplate let-dataItem>
            <button
              kendoButton
              look="flat"
              class="card-link-button"
              aria-label="proof of income"
            >
              {{ dataItem.ProofofIncome }}
            </button>
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          field="incomeNote"
          title="Financial Justification or Income note"
          [width]="150"
          [sticky]="true"
        >
          <ng-template
            kendoGridFooterTemplate
            let-column
            let-columnIndex="columnIndex"
          >
            (178% FPL)
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          field="MonthlyIncome"
          title="Monthly Income"
          [width]="100"
          [sticky]="true"
        >
          <ng-template
            kendoGridFooterTemplate
            let-column
            let-columnIndex="columnIndex"
          >
            $10000.00
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          field="Option"
          title="Option"
          [width]="75"
          [sticky]="true"
          class="text-center"
        >
          <ng-template kendoGridCellTemplate let-dataItem>
            <kendo-dropdownbutton
              [data]="actionsmore"
              icon="more-vertical"
              class="TableActionPopup"
              buttonClass="k-icon-button"
              aria-label="more actions"
              [popupSettings]="{ popupClass: popupClassAction, animate: true }"
            >
            
              <ng-template class="app-dropdown-action-list" kendoDropDownButtonItemTemplate let-dataItem>
                <button kendoButton  look="flat" [attr.aria-label]="dataItem.text" [class]="dataItem.buttonType" aria-hidden="false" (click)="dataItem.click">
                  <span class="material-icons" [attr.aria-label]="dataItem.text" >{{dataItem.icon}}</span>
                  <label>   {{ dataItem.text }} </label>
              </button>
                <!-- <button
                  kendoButton
                  icon="edit"
                  look="flat"
                  class="btn-h-primary"
                  (click)="onIncomeClicked(true)"
                  aria-label="edit income"
                >
                  Edit Income
                </button>
                <button
                  kendoButton
                  icon="delete"
                  look="flat"
                  class="btn-h-danger"
                  aria-label="delete income"
                >
                  Delete Income
                </button> -->
              </ng-template>
            </kendo-dropdownbutton>
          </ng-template>
        </kendo-grid-column>
      </kendo-grid>
    </div>
    <div
      class="block-section mt-1 text-right"
      *ngIf="!isAddIncomeButtonAndFooterNoteDisplay"
    >
      FPL changed from 155% to 150% on 03/01/2020
    </div>
    <div class="flex-row" *ngIf="!hasNoIncome">
      <div class="flex-col mt-1">
        <button
          kendoButton
          *ngIf="isAddIncomeButtonAndFooterNoteDisplay"
          [primary]="true"
          icon="add"
          (click)="onIncomeClicked(false)"
          aria-label="add income"
        >
          Income
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Dependents' Proof of School -->
<div class="flex-row mt-3">
  <div class="flex-col">
    <h5 class="text-capital align-items-center">Dependents' Proof of School</h5>
    <div class="app-c-table">
      <kendo-grid [data]="dependentsProofofSchools$ | async">
        <kendo-grid-column field="Name" title="Name" [width]="130">
        </kendo-grid-column>
        <kendo-grid-column field="Age" title="Age" [width]="130">
        </kendo-grid-column>
        <kendo-grid-column
          field="Relationship"
          title="Relationship"
          [width]="130"
        ></kendo-grid-column>
        <kendo-grid-column
          field="ProofofSchool"
          title="Proof of School"
          [width]="130"
          class="text-center"
        >
          <ng-template kendoGridCellTemplate let-dataItem>
            <kendo-dropdownbutton
              [data]="actions"
              icon="upload"
              class="TableActionPopup app-dropdown-action"
              buttonClass="k-icon-button"
              aria-label="more actions"
              [popupSettings]="{ popupClass: popupClassAction, animate: true }"
            >
              <!-- <span
                class="material-icons"
                aria-label="upload income details"
                aria-hidden="true"
                role="menuitem"
                >upload</span
              > -->
              <ng-template class="app-dropdown-action-list" kendoDropDownButtonItemTemplate let-dataItem>
                <button kendoButton  look="flat" [attr.aria-label]="dataItem.text" [class]="dataItem.buttonType" aria-hidden="false" (click)="dataItem.click">
                  <!-- <span class="material-icons" [attr.aria-label]="dataItem.text" >{{dataItem.icon}}</span> -->
                  <label>   {{ dataItem.text }} </label>
              </button>

<!--                 
                <button
                  kendoButton
                  look="flat"
                  class="btn-h-primary"
                  aria-label="attach from computer"
                >
                  Attach from computer
                </button>
                <button
                  kendoButton
                  look="flat"
                  class="btn-h-primary"
                  aria-label="attach from client attachments"
                >
                  Attach from client attachments
                </button>
                <button
                  kendoButton
                  icon="delete"
                  look="flat"
                  class="btn-h-danger"
                  aria-label="remove file"
                >
                  Remove File
                </button> -->
              </ng-template>
            </kendo-dropdownbutton>
          </ng-template>
        </kendo-grid-column>
      </kendo-grid>
    </div>
  </div>
</div>

<!-- Add Income  Modal -->
<kendo-dialog *ngIf="isOpenedIncome" (close)="onIncomeClosed()" class="app-c-modal app-c-modal-md app-c-modal-np">
  <kendo-dialog-titlebar>{{
    isEdit ? 'Edit Income' : 'Add Income'
  }}</kendo-dialog-titlebar>
  <case-management-income-detail (sendDetailToIncomeList)="receiveDetailFromIcomeDetails($event)" (closePopup)="closeIncomePopup($event)"[isEditValue]="isEdit"> </case-management-income-detail>
</kendo-dialog>


<div kendoDialogContainer>
  <common-delete-confirmation
    (sendBackInformation)="handleDeleteConfirmationClicked($event)"
    [data$]="deleteRequest$"
  ></common-delete-confirmation>
</div>

<common-notification-snack-bar [data$]="snackbar$"> </common-notification-snack-bar>
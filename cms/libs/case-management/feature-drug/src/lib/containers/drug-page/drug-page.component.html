<div class="client-data-block">
  <h3>Prescription Drugs</h3>
  <form [formGroup]="prescriptionDrugForm">
  <section>
   
    <!-- <form [formGroup]="prescriptionDrugForm"> -->
      <fieldset class="k-form-fieldset">
        <legend class="k-form-legend"> <h5 class="mt-1">
          Are they currently taking prescription drugs for HIV (anti-retrovirals)?
        </h5></legend>
      <div class="component-list-h">
        <kendo-formfield>
        <span class="app-radiobtnwidtext-wrapper">
          <input
            type="radio"
            kendoRadioButton
            formControlName="prescriptionDrugsForHivCode"
            (change)="hivFlagSelected($event)"
            value="YES"  
            name="prescription"
            id="takingPrescriptionYes"  />
          <kendo-label
            class="k-radio-label"
            for="takingPrescriptionYes"
            text="Yes"
          ></kendo-label>
        </span>
        <span class="app-radiobtnwidtext-wrapper">
          <input
            type="radio"
            kendoRadioButton
            formControlName="prescriptionDrugsForHivCode"
            (change)="hivFlagSelected($event)"
            value="NO"  
            name="prescription"
            id="takingPrescriptionNo"
          />
          <kendo-label
            class="k-radio-label"
            for="takingPrescriptionNo"
            text="No"
          ></kendo-label>
        </span>
        <span class="app-radiobtnwidtext-wrapper">
          <input
            type="radio"
            kendoRadioButton 
            formControlName="prescriptionDrugsForHivCode"
            value="DO_NOT_KNOW" 
            name="prescription"
            id="takingPrescriptionDontKnow"
          />
          <kendo-label
            class="k-radio-label"
            for="takingPrescriptionDontKnow"
            text="Do not know"
          ></kendo-label>
        </span>
        <kendo-formerror> Are they currently taking prescription drugs for HIV is required </kendo-formerror>
        </kendo-formfield>
      </div>
      </fieldset>
  </section>
  <section>
 
    <fieldset class="k-form-fieldset">
      <legend class="k-form-legend"><h5>Health insurance requires a particular non-preferred pharmacy (e.g. Medco,
        Kaiser, or specified mail order)?</h5></legend>
     
    <div class="component-list-h">
      <kendo-formfield>
      <span class="app-radiobtnwidtext-wrapper">
        <input
          type="radio"
          kendoRadioButton
          formControlName="nonPreferredPharmacyCode"
          value="YES" 
          name="healthInsurance"
          id="requiresNonPreferredPharmacyYes"
        />
        <kendo-label
          class="k-radio-label"
          for="requiresNonPreferredPharmacyYes"
          text="Yes"
        ></kendo-label>
      </span>
      <span class="app-radiobtnwidtext-wrapper">
        <input
          type="radio"
          kendoRadioButton
          formControlName="nonPreferredPharmacyCode"
          value="NO" 
          name="healthInsurance"
          id="requiresNonPreferredPharmacyNo"
        />
        <kendo-label
          class="k-radio-label"
          for="requiresNonPreferredPharmacyNo"
          text="No"
        ></kendo-label>
      </span>
      <span class="app-radiobtnwidtext-wrapper">
        <input
          type="radio"
          kendoRadioButton 
          formControlName="nonPreferredPharmacyCode"
          value="DO_NOT_KNOW"
          name="healthInsurance"
          id="requiresNonPreferredPharmacyDontKnow"
        />
        <kendo-label
          class="k-radio-label" 
          text="Do not know"
          for="requiresNonPreferredPharmacyDontKnow"
        ></kendo-label>
      </span>
      <kendo-formerror   *ngIf="nonPreferredFlagValidation">Health insurance requires a particular non-preferred pharmacy is required</kendo-formerror>
      <!-- <kendo-formerror>Health insurance requires a particular non-preferred pharmacy is required</kendo-formerror> -->
    </kendo-formfield>
    </div>
    </fieldset>
  <!-- </form> -->
  </section>
  <section>
    <div class="flex-row mt-3">
      <div class="flex-col mat-split-list">
        <h5 class="text-capital">
          Summary of benefits with pharmacy Information
        </h5>
        <span class="app-checkboxwidtext-wrapper">
          <input
            class="adjust-attr"
            type="checkbox"
            name="noSummaryOfBenefits"
            kendoCheckBox
            id="noSummaryOfBenefits"
            formControlName="noSummaryOfBenefitsFlag"
          />
          <kendo-label 
          class="k-checkbox-label" 
          for="noSummaryOfBenefits"
          text="No Summary of Benefits"
            ></kendo-label>
        </span>
      </div>
    </div>
    <div class="flex-row mt-2" *ngIf="isSummaryOfBenefitsRequired$ | async">
      <div class="flex-col flex-col-10">
        <kendo-upload
        aria-label="upload proof" 
        name="myFileSelect" 
        #myFileSelect="ngModel"
        [restrictions]="uploadFileRestrictions.fileRestrictions"   
        [multiple]="false" 
        [autoUpload]="false"
        [ngModel]="uploadedBenefitSummaryFile" 
        [ngModelOptions]="{standalone: true}"
        (select)="handleFileSelected($event)" 
        (remove)="handleFileRemoved()">
        <ng-template kendoUploadFileInfoTemplate  let-files let-state="state">
          <div (click)="clientDocumentFacade.viewOrDownloadFile('view',files[0].documentId,files[0].name)">
            <span>{{files[0].name}} </span> 
            <br>
            <span>{{files[0].size}}</span> 
          </div>
        </ng-template> 
      </kendo-upload>
        <kendo-formhint>Max file size 25MB</kendo-formhint>
        <kendo-formerror *ngIf="summaryBenefitsValidator">File size is limited to 25 MB. Please select a smaller file. </kendo-formerror>
        <kendo-formerror *ngIf="showDocRequiredValidation">Summary of Benefits is required</kendo-formerror>
      </div>
    </div>
  </section>
</form>

  <!-- Pharmacies -->
  <section>
    <h5 class="text-capital mt-3">Add Pharmacies</h5>
    <case-management-pharmacy-list
    [clientpharmacies$]="clientpharmacies$"
    [pharmacysearchResult$]="pharmacysearchResult$"
    [selectedPharmacy$]="selectedPharmacy$"
    [addPharmacyResponse$]="addPharmacyRsp$"
    [editPharmacyResponse$]="editPharmacyRsp$"
    [removePharmacyResponse$]="removePharmacyRsp$"
    [triggerPriorityPopup$]="triggerPriorityPopup$"
    [searchLoaderVisibility$]="searchLoaderVisibility$"
    (searchPharmacy)="searchPharmacy($event)"
    (addPharmacyClick)="addPharmacy($event)"
    (editPharmacyInit)="editPharmacyInit($event)"
    (editPharmacyClick)="editPharmacy($event)"
    (removePharmacyClick)="removePharmacy($event)"
    ></case-management-pharmacy-list>
  </section>
</div>

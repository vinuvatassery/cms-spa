<section class="k-dialog-body newcase">
  <p class="mb-2">
    Approved batches will be sent to the Salem Fiscal Team via email. “Send
    Back” batches will be sent back to the user who submitted them.
  </p>

  <div class="flex-row" *ngIf="
      selectedSubtypeCode === subTypeConst.DentalClinic ||
      selectedSubtypeCode === subTypeConst.MedicalClinic ||
      selectedSubtypeCode === subTypeConst.MedicalProvider ||
      selectedSubtypeCode === subTypeConst.DentalProvider
    " [formGroup]="healthCareForm">
    <div *ngIf="selectedSubtypeCode == subTypeConst.MedicalClinic || subTypeConst.DentalClinic"
      class="flex-col flex-col-8 inlineloaderwrapper hidedropicon">
      <div class="k-auto-complete-box">
        <span *ngIf="clinicVendorLoader$ | async"
          class=" k-icon k-i-loading k-input-loading-icon input-inline-loader"></span>
        <kendo-floatinglabel text="Clinic Name">
          <kendo-combobox 
          #vendor
          [popupSettings]="{ popupClass: 'combotable_search_list', animate: true }"
          placeholder="Clinic Name" 
          [fillMode]="formUiStyle.dropDownFillMode"          
          [filterable]="true"
          (filterChange)="searchClinic($event)" 
          [data]="clinicVendorListLocal" 
          [formControlName]="'providerName'"
          [valuePrimitive]="true" 
          [valueField]="'vendorId'" 
          [textField]="'vendorName'"
          [valuePrimitive]="true"
          [(ngModel)]="selectedVendor">
          <ng-template kendoComboBoxItemTemplate let-dataItem>
            <span>{{ dataItem.vendorName }}</span>
          </ng-template>
            <button kendoButton
              fillMode="clear" icon="image"></button>
          </kendo-combobox>
        </kendo-floatinglabel>
        <kendo-formerror *ngIf="healthCareFormControls?.providerName.errors?.required && isValidateForm">
          Clinic Name is required
        </kendo-formerror>
        <kendo-formhint>
          Start typing to choose an existing clinic, or enter a new one
        </kendo-formhint>
      </div>
    </div>
    <div class="flex-col flex-col-6" *ngIf="selectedMasterData.firstName">
      <kendo-floatinglabel text="Provider First Name">
        <kendo-textbox aria-label="Provider First Name" placeholder="Provider First Name"
          [fillMode]="formUiStyle.inputFillMode" formControlName="firstName" [maxlength]="50">
        </kendo-textbox>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="healthCareFormControls?.firstName.errors?.required && isValidateForm">
        First Name is required
      </kendo-formerror>
    </div>
    <div class="flex-col flex-col-6" *ngIf="selectedMasterData.lastName">
      <kendo-floatinglabel text="Provider Last Name">
        <kendo-textbox aria-label="Provider Last Name" placeholder="Provider Last Name"
          [fillMode]="formUiStyle.inputFillMode" formControlName="lastName" [maxlength]="50">
        </kendo-textbox>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="healthCareFormControls?.lastName.errors?.required && isValidateForm">
        Last Name is required
      </kendo-formerror>
    </div>
    <div class="flex-col">
      <kendo-floatinglabel text="Tin">
        <kendo-maskedtextbox aria-label="TIN" [fillMode]="formUiStyle.inputFillMode" [maxlength]="9"
          placeholder="TIN (optional)" [maskOnFocus]="true" formControlName="tinNumber" [mask]="tinMaskFormat">
        </kendo-maskedtextbox>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="healthCareFormControls?.tinNumber.errors?.required && isValidateForm">
        Tin Name is required
      </kendo-formerror>
    </div>
    <div class="flex-col">
      <kendo-floatinglabel text="Phone Number (optional)">
        <kendo-maskedtextbox aria-label="Phone Number (optional)" [fillMode]="formUiStyle.inputFillMode"
          formControlName="phoneNumber" mask="(999) 000-0000">
        </kendo-maskedtextbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col">
      <kendo-floatinglabel text="Email (optional)">
        <kendo-textbox aria-label="Email (optional)" placeholder="Email (optional)"
          [fillMode]="formUiStyle.inputFillMode" formControlName="email" [maxlength]="200">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>

    <div class="flex-col">
      <kendo-floatinglabel text="Fax (optional)">
        <kendo-maskedtextbox aria-label="Fax (optional)" [fillMode]="formUiStyle.inputFillMode" formControlName="fax"
          mask="(999) 000-0000">
        </kendo-maskedtextbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col">
      <kendo-floatinglabel text="Address line 1">
        <kendo-textbox aria-label="address line 1" placeholder="Address line 1" [fillMode]="formUiStyle.inputFillMode"
          formControlName="addressLine1" [maxlength]="200">
        </kendo-textbox>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="healthCareFormControls?.addressLine1.errors?.required && isValidateForm">
        Address line 1 is required
      </kendo-formerror>
    </div>
    <div class="flex-col">
      <kendo-floatinglabel text="Address Line 2 (optional)">
        <kendo-textbox aria-label="Address Line 2 (optional)" placeholder="Address Line 2 (optional)"
          [fillMode]="formUiStyle.inputFillMode" formControlName="addressLine2" [maxlength]="50">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col">
      <kendo-floatinglabel text="City">
        <kendo-textbox aria-label="city" placeholder="City" [fillMode]="formUiStyle.inputFillMode"
          formControlName="city" [maxlength]="50">
        </kendo-textbox>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="healthCareFormControls?.city.errors?.required && isValidateForm">
        City Name is required
      </kendo-formerror>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="State">
        <kendo-dropdownlist aria-label="State" [fillMode]="formUiStyle.dropDownFillMode" formControlName="state"
          [data]="ddlStates$| async" textField="stateName" valueField="stateCode" [valuePrimitive]="true"
          placeholder="State">
        </kendo-dropdownlist>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="healthCareFormControls?.state.errors?.required && isValidateForm">
        State is required
      </kendo-formerror>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Zip">
        <kendo-textbox aria-label="Zip" placeholder="Zip" [fillMode]="formUiStyle.inputFillMode" formControlName="zip"
          [maxlength]="10">
        </kendo-textbox>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="healthCareFormControls?.zip.errors?.required && isValidateForm">
        Zip is required
      </kendo-formerror>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Contact First Name (optional)">
        <kendo-textbox aria-label="Contact First Name (optional)" placeholder="Contact First Name (optional)"
          [fillMode]="formUiStyle.inputFillMode" formControlName="contactFirstName" [maxlength]="40">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Contact Last Name (optional)">
        <kendo-textbox aria-label="Contact Last Name (optional)" placeholder="Contact Last Name (optional)"
          [fillMode]="formUiStyle.inputFillMode" formControlName="contactLastName" [maxlength]="40">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Contact Phone (optional)">
        <kendo-maskedtextbox aria-label="Phone Number (optional)" [fillMode]="formUiStyle.inputFillMode"
          formControlName="contactPhone" mask="(999) 000-0000">
        </kendo-maskedtextbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Contact Fax (optional)">
        <kendo-maskedtextbox aria-label="Fax (optional)" [fillMode]="formUiStyle.inputFillMode"
          formControlName="contactFax" mask="(999) 000-0000">
        </kendo-maskedtextbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Contact Email (optional)">
        <kendo-textbox aria-label="Contact Email (optional)" placeholder="Contact Email (optional)"
          [fillMode]="formUiStyle.inputFillMode" formControlName="contactEmail" [maxlength]="200">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
  </div>
  <div class="flex-row" *ngIf="selectedSubtypeCode === subTypeConst.Drug" [formGroup]="drugForm">
    <div class="k-auto-complete-box">
      <span *ngIf="clinicVendorLoader$ | async"
        class=" k-icon k-i-loading k-input-loading-icon input-inline-loader"></span>
      <kendo-floatinglabel text="Manufacturer Name">
        <kendo-combobox #vendor [popupSettings]="{ popupClass: 'combotable_search_list', animate: true }"
          placeholder="Manufacturer Name" [fillMode]="formUiStyle.dropDownFillMode" [filterable]="true"
          (filterChange)="searchClinic($event)" [data]="clinicVendorListLocal" [formControlName]="'providerName'"
          [valuePrimitive]="true" [valueField]="'vendorId'" [textField]="'vendorName'" [valuePrimitive]="true"
          [(ngModel)]="selectedVendor">
          <ng-template kendoComboBoxItemTemplate let-dataItem>
            <span>{{ dataItem.vendorName }}</span>
          </ng-template>
          <button kendoButton fillMode="clear" icon="image"></button>
        </kendo-combobox>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="drugFormControls?.providerName.errors?.required && isValidateForm">
        Manufacturer Name is required
      </kendo-formerror>
      <kendo-formhint>
        Start typing to choose an existing manufacturer, or enter a new one
      </kendo-formhint>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Drug Name">
        <kendo-textbox aria-label="Drug Name" placeholder="Drug Name" [fillMode]="formUiStyle.inputFillMode"
          formControlName="drugName" [maxlength]="50">
        </kendo-textbox>
        <kendo-formerror *ngIf="drugFormControls?.drugName.errors?.required && isValidateForm">
          Drug Name is required
        </kendo-formerror>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Brand Name">
        <kendo-textbox aria-label="Brand Name" placeholder="Brand Name" [fillMode]="formUiStyle.inputFillMode"
          formControlName="brandName" [maxlength]="50">
        </kendo-textbox>
        <kendo-formerror *ngIf="drugFormControls?.brandName.errors?.required && isValidateForm">
          Brand Name is required
        </kendo-formerror>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col">
      <kendo-floatinglabel text="NDC Code">
        <kendo-textbox aria-label="NDC Code" placeholder="NDC Code" [fillMode]="formUiStyle.inputFillMode"
          formControlName="ndcCode">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col">
      <fieldset class="k-form-fieldset">
        <legend class="k-form-legend">
          <h5 class="mb-0"> Drug Types </h5>
        </legend>
  
        <div class="component-list-h">
          <span class="app-radiobtnwidtext-wrapper">
            <input type="radio" kendoRadioButton aria-labelledby="HIV" name="drugType" id="HIV" value="HIV"
              formControlName="drugType" />
            <kendo-label class="k-radio-label" text="HIV Drug?" for="HIV"></kendo-label>
          </span>
          <span class="app-radiobtnwidtext-wrapper">
            <input type="radio" kendoRadioButton name="drugType" id="HEPATITIS" aria-labelledby="HEPATITIS"
              value="HEPA" formControlName="drugType" />
            <kendo-label class="k-radio-label" text="Hepatitis Drug?" for="HEPATITIS"></kendo-label>
          </span>
          <span class="app-radiobtnwidtext-wrapper">
            <input type="radio" kendoRadioButton name="drugType" id="OPPORTUNISTICINFECTION" aria-labelledby="OPPORTUNISTICINFECTION" value="OPINF"
              formControlName="drugType" />
            <kendo-label class="k-radio-label" text="Opportunistic Drug?" for="OPPORTUNISTICINFECTION"></kendo-label>
          </span>
  
        </div>
        <kendo-formerror *ngIf="drugFormControls?.drugType.errors?.required && isValidateForm">
          Drug Type is required
        </kendo-formerror>
      </fieldset>
    </div>
    <div class="flex-col">
      <fieldset class="k-form-fieldset">
        <legend class="k-form-legend">
          <h5 class="mb-0"> Delivery Method </h5>
        </legend>
  
        <div class="component-list-h">
          <span class="app-radiobtnwidtext-wrapper">
            <input type="radio" kendoRadioButton aria-labelledby="tablet" name="deliveryMethod" id="tablet" value="TABLET"
              formControlName="deliveryMethod" />
            <kendo-label class="k-radio-label" text="Tablet" for="tablet"></kendo-label>
          </span>
          <span class="app-radiobtnwidtext-wrapper">
            <input type="radio" kendoRadioButton name="deliveryMethod" id="injection" aria-labelledby="injection"
              value="INJECTION" formControlName="deliveryMethod" />
            <kendo-label class="k-radio-label" text="Injection" for="injection"></kendo-label>
          </span>
          <span class="app-radiobtnwidtext-wrapper">
            <input type="radio" kendoRadioButton name="deliveryMethod" id="syrup" aria-labelledby="syrup" value="SYRUP"
              formControlName="deliveryMethod" />
            <kendo-label class="k-radio-label" text="Syrup" for="syrup"></kendo-label>
          </span>
  
        </div>
        <kendo-formerror *ngIf="drugFormControls?.deliveryMethod.errors?.required && isValidateForm">
          Delivery Method is required
        </kendo-formerror>
      </fieldset>
    </div>
  </div>
  <div class="flex-row" *ngIf="selectedSubtypeCode === subTypeConst.InsurancePlan" [formGroup]="insurancePlanForm">
    <div class="k-auto-complete-box">
      <span *ngIf="clinicVendorLoader$ | async"
        class=" k-icon k-i-loading k-input-loading-icon input-inline-loader"></span>
      <kendo-floatinglabel text="Insurance Provider Name">
        <kendo-combobox #vendor [popupSettings]="{ popupClass: 'combotable_search_list', animate: true }"
          placeholder="Insurance Provider Name" [fillMode]="formUiStyle.dropDownFillMode" [filterable]="true"
          (filterChange)="searchClinic($event)" [data]="clinicVendorListLocal" [formControlName]="'providerName'"
          [valuePrimitive]="true" [valueField]="'vendorId'" [textField]="'vendorName'" [valuePrimitive]="true"
          [(ngModel)]="selectedVendor" 
          (selectionChange)="selectionChange($event)">
          <ng-template kendoComboBoxItemTemplate let-dataItem>
            <span>{{ dataItem.vendorName }}</span>
          </ng-template>
          <button kendoButton fillMode="clear" icon="image"></button>
        </kendo-combobox>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="insurancePlanFormControls?.providerName.errors?.required && isValidateForm">
        Manufacturer Name is required
      </kendo-formerror>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Insurance Plan Name">
        <kendo-textbox aria-label="Insurance Plan Name" placeholder="Insurance Plan Name" [fillMode]="formUiStyle.inputFillMode"
          formControlName="insurancePlanName" [maxlength]="50">
        </kendo-textbox>
        <kendo-formerror *ngIf="insurancePlanFormControls?.insurancePlanName.errors?.required && isValidateForm">
          Insurance Plan Name is required
        </kendo-formerror>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <legend class="k-form-legend">
        <h5 class="mb-0"> Health Insurance Type </h5>
      </legend>
      <kendo-floatinglabel text="Health Insurance Type">
        <kendo-dropdownlist aria-label="Health Insurance Type" [fillMode]="formUiStyle.dropDownFillMode" formControlName="healthInsuranceTypeCode"
          [data]="insuranceTypelovForPlan$ | async" textField="lovDesc" valueField="lovCode" [valuePrimitive]="true"
          placeholder="State">
        </kendo-dropdownlist>
      </kendo-floatinglabel>
      <kendo-formerror *ngIf="insurancePlanFormControls?.healthInsuranceTypeCode.errors?.required && isValidateForm">
        State is required
      </kendo-formerror>
    </div>
    <div class="flex-col flex-col-6">
      <legend class="k-form-legend">
        <h5 class="mb-0"> This insurance plan can pay for medication? </h5>
      </legend>
      <fieldset class="k-form-fieldset">
        <div class="component-list-h">
          <span class="app-radiobtnwidtext-wrapper">
            <input type="radio" kendoRadioButton aria-labelledby="canPayForMedicationFlag" name="canPayForMedicationFlag" id="canPayForMedicationFlag" value="YES"
              formControlName="canPayForMedicationFlag" />
            <kendo-label class="k-radio-label" text="YES" for="canPayForMedicationFlag"></kendo-label>
          </span>
          <span class="app-radiobtnwidtext-wrapper">
            <input type="radio" kendoRadioButton aria-labelledby="canPayForMedicationFlag" name="canPayForMedicationFlag" id="canPayForMedicationFlag" value="NO"
              formControlName="canPayForMedicationFlag" />
            <kendo-label class="k-radio-label" text="NO" for="canPayForMedicationFlag"></kendo-label>
          </span>
        </div>
      </fieldset>
    </div>
    <div class="flex-col flex-col-6">
      <legend class="k-form-legend">
        <h5 class="mb-0"> This is a Dental Plan? </h5>
      </legend>
      <fieldset class="k-form-fieldset">
        <div class="component-list-h">
          <span class="app-radiobtnwidtext-wrapper">
            <input type="radio" kendoRadioButton aria-labelledby="dentalPlanFlag" name="dentalPlanFlag" id="dentalPlanFlag" value="YES"
              formControlName="dentalPlanFlag" />
            <kendo-label class="k-radio-label" text="YES" for="dentalPlanFlag"></kendo-label>
          </span>
          <span class="app-radiobtnwidtext-wrapper">
            <input type="radio" kendoRadioButton aria-labelledby="dentalPlanFlag" name="dentalPlanFlag" id="dentalPlanFlag" value="NO"
              formControlName="dentalPlanFlag" />
            <kendo-label class="k-radio-label" text="NO" for="dentalPlanFlag"></kendo-label>
          </span>
        </div>
      </fieldset>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Start Date">
        <kendo-datepicker [fillMode]="formUiStyle.dateInputFillMode"
            aria-label="Start Date" format="MM/dd/yyyy"
            formatPlaceholder="formatPattern"
            formControlName="startDate" placeholder=""
            >
        </kendo-datepicker>
    </kendo-floatinglabel>
    <kendo-formerror *ngIf="insurancePlanFormControls?.startDate.errors?.required && isValidateForm">
      Start Date is required
    </kendo-formerror>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Term Date (optional)">
        <kendo-datepicker [fillMode]="formUiStyle.dateInputFillMode"
            aria-label="Term Date (optional)" format="MM/dd/yyyy"
            formatPlaceholder="formatPattern"
            formControlName="termDate" placeholder=""
            >
        </kendo-datepicker>
    </kendo-floatinglabel>
    </div>
  </div>
  <div class="flex-row" *ngIf="selectedSubtypeCode === subTypeConst.InsuranceProvider">
    <div class="flex-col">
      <div class="k-auto-complete-box">
        <kendo-floatinglabel text="Provider Name">
          <span class="k-icon k-i-loading k-input-loading-icon input-inline-loader"></span>
          <kendo-autocomplete [fillMode]="formUiStyle.dropDownFillMode" placeholder="Provider Name" [filterable]="true"
            [popupSettings]="{
              popupClass: 'healthcaresearch-list auto-complete-with-template',
              animate: true,
              appendTo: 'component'
            }">
          </kendo-autocomplete>
        </kendo-floatinglabel>
        <kendo-formhint>
          Start typing to choose an existing clinic, or enter a new one
        </kendo-formhint>
      </div>
    </div>
  </div>
  <div class="flex-row" *ngIf="selectedSubtypeCode === subTypeConst.InsuranceVendor">
    <div class="flex-col">
      <div class="k-auto-complete-box">
        <kendo-floatinglabel text="Insurance Provider">
          <span class="k-icon k-i-loading k-input-loading-icon input-inline-loader"></span>
          <kendo-autocomplete [fillMode]="formUiStyle.dropDownFillMode" placeholder="Insurance Provider"
            [filterable]="true" [popupSettings]="{
              popupClass: 'healthcaresearch-list auto-complete-with-template',
              animate: true,
              appendTo: 'component'
            }">
          </kendo-autocomplete>
        </kendo-floatinglabel>
        <kendo-formhint>
          Start typing to choose an existing clinic, or enter a new one
        </kendo-formhint>
      </div>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Insurance Plan Name">
        <kendo-textbox aria-label="Insurance Plan Name" placeholder="Insurance Plan Name"
          [fillMode]="formUiStyle.inputFillMode">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Health Insurance Type">
        <kendo-textbox aria-label="Health Insurance Type" placeholder="Health Insurance Type"
          [fillMode]="formUiStyle.inputFillMode">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Can pay for medication">
        <kendo-textbox aria-label="Can pay for medication" placeholder="Can pay for medication"
          [fillMode]="formUiStyle.inputFillMode">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Is a dental plan">
        <kendo-textbox aria-label="Is a dental plan" placeholder="Is a dental plan"
          [fillMode]="formUiStyle.inputFillMode">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Start Date">
        <kendo-textbox aria-label="Start Date" placeholder="Start Date" [fillMode]="formUiStyle.inputFillMode">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
    <div class="flex-col flex-col-6">
      <kendo-floatinglabel text="Term Date">
        <kendo-textbox aria-label="Term Date" placeholder="Term Date" [fillMode]="formUiStyle.inputFillMode">
        </kendo-textbox>
      </kendo-floatinglabel>
    </div>
  </div>
  <div class="flex-row" *ngIf="selectedSubtypeCode === subTypeConst.Pharmacy"></div>
</section>
<kendo-dialog-actions>
  <div class="justify-content-between">
    <div class="justify-content-start">
      <button aria-label="Update" kendoButton [primary]="true" (click)="onUpdateClicked()">Update</button>
      <button kendoButton [primary]="true" look="outline" class="" aria-label="Cancel" (click)="onCancel()">
        Cancel
      </button>
    </div>
  </div>
</kendo-dialog-actions>
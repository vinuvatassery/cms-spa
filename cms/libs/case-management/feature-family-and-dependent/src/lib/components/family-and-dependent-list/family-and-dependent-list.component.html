<div class="app-c-table">
  <kendo-grid [data]="dependents$ | async">
    <kendo-grid-column field="fullLegalName" title="Full Legal Name">
      <ng-template kendoGridCellTemplate let-dataItem>
        <div *ngIf="dataItem.careAssistClient==='Yes'">
        <button aria-label="client name" kendoButton look="flat" class="card-link-button"
        routerLink="case360/{{ dataItem.clientId }}">
        {{ dataItem.fullLegalName }}
      </button>
    </div>
    <div *ngIf="dataItem.careAssistClient==='No'">
        {{ dataItem.fullLegalName }}
     </div>
       </ng-template>
    </kendo-grid-column>
    <kendo-grid-column
      field="relationshipToClient"
      title="Relationship to Client"
    >
    </kendo-grid-column>
    <kendo-grid-column
      field="careAssistClient"
      title="CAREAssist client?" 
    >
   
  </kendo-grid-column>
    <kendo-grid-column
      field="dateOfBirth"
      title="Date of Birth"
    ></kendo-grid-column> 
    <kendo-grid-column
      field="insurancePlan"
      title="Currently on clientâ€™s health insurance plan?"
      [width]="175"
    >
    </kendo-grid-column>
    <kendo-grid-column
      field="Option"
      title="Options"
      [width]="75"
      class="text-center"
    >
      <ng-template kendoGridCellTemplate let-dataItem>
        <div *ngIf="dataItem.careAssistClient=='Yes'">
        <kendo-dropdownbutton
          [data]=  "actions"
          icon="more-vertical"
          class="TableActionPopup app-dropdown-action"
          buttonClass="k-icon-button"
          [id]="dataItem.fullLegalName"
          aria-label="more actions"
          [popupSettings]="{ popupClass: popupClassAction, animate: true }"
        >
         
        <ng-template class="app-dropdown-action-list" kendoDropDownButtonItemTemplate let-dataItem>
          <button kendoButton  look="flat" [attr.aria-label]="dataItem.text" [class]="dataItem.buttonType" aria-hidden="false" (click)="dataItem.click">
            <span class="material-icons" [attr.aria-label]="dataItem.text" >{{dataItem.icon}}</span>
            <label> {{dataItem.text }} </label>
        </button>
        </ng-template>
      </kendo-dropdownbutton>
      </div>
      <div *ngIf="dataItem.careAssistClient=='No'">
        <kendo-dropdownbutton
          [data]= "familyMemberOptions"
          icon="more-vertical"
          class="TableActionPopup app-dropdown-action"
          buttonClass="k-icon-button"
          [id]="dataItem.fullLegalName"
          aria-label="more actions"
          [popupSettings]="{ popupClass: popupClassAction, animate: true }"
        >
         
        <ng-template class="app-dropdown-action-list" kendoDropDownButtonItemTemplate let-dataItem>
          <button kendoButton  look="flat" [attr.aria-label]="dataItem.text" [class]="dataItem.buttonType" aria-hidden="false" (click)="dataItem.click">
            <span class="material-icons" [attr.aria-label]="dataItem.text" >{{dataItem.icon}}</span>
            <label>  {{dataItem.text }} </label>
        </button>
        </ng-template>
        </kendo-dropdownbutton>
      </div>
      </ng-template>
    </kendo-grid-column>
  </kendo-grid>
</div>
<div class="flex-row">
  <div class="flex-col mt-1">
    <button
      *ngIf="isAddOrEditFamilyDependentDisplay"
      kendoButton
      [primary]="true"
      icon="add"
      (click)="onFamilyMemberClicked(true)"
      aria-label="add family member"
    >
      Family Member
    </button>
  </div>
</div>

<!-- Add Family Member Modal -->
<kendo-dialog
  *ngIf="isOpenedFamilyMember || isOpenedEditFamilyMember"
  (close)="onFamilyMemberClosed()"
  class="app-c-modal app-c-modal-sm app-c-modal-np"
>
  <kendo-dialog-titlebar>
    {{ isAddFamilyMember ? 'Add Family Member' : 'Edit Family Member' }}
  </kendo-dialog-titlebar>
  <case-management-family-and-dependent-detail
    [isAddFamilyMember]="isAddFamilyMember"
  ></case-management-family-and-dependent-detail>
</kendo-dialog>

<div kendoDialogContainer>
  <common-delete-confirmation
    (sendBackInformation)="handleDeleteConfirmationClicked($event)"
    [data$]="deleteRequest$"
  ></common-delete-confirmation>
</div>
